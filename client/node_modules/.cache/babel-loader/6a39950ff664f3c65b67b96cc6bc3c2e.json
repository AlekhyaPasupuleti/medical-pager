{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nvar __spreadArray = this && this.__spreadArray || function (to, from) {\n  for (var i = 0, il = from.length, j = to.length; i < il; i++, j++) to[j] = from[i];\n  return to;\n};\nimport React, { useCallback, useEffect, useLayoutEffect, useMemo, useReducer, useRef, useState } from 'react';\nimport debounce from 'lodash.debounce';\nimport throttle from 'lodash.throttle';\nimport { logChatPromiseExecution } from 'stream-chat';\nimport { v4 as uuidv4 } from 'uuid';\nimport { channelReducer, initialState } from './channelState';\nimport { commonEmoji, defaultMinimalEmojis, emojiSetDef } from './emojiData';\nimport { useEditMessageHandler } from './hooks/useEditMessageHandler';\nimport { useIsMounted } from './hooks/useIsMounted';\nimport { useMentionsHandlers } from './hooks/useMentionsHandlers';\nimport { Attachment as DefaultAttachment } from '../Attachment/Attachment';\nimport { LoadingErrorIndicator as DefaultLoadingErrorIndicator, LoadingIndicator as DefaultLoadingIndicator } from '../Loading';\nimport { MessageSimple } from '../Message/MessageSimple';\nimport { ChannelActionProvider } from '../../context/ChannelActionContext';\nimport { ChannelStateProvider } from '../../context/ChannelStateContext';\nimport { ComponentProvider } from '../../context/ComponentContext';\nimport { useChatContext } from '../../context/ChatContext';\nimport { EmojiProvider } from '../../context/EmojiContext';\nimport { useTranslationContext } from '../../context/TranslationContext';\nimport { TypingProvider } from '../../context/TypingContext';\nimport defaultEmojiData from '../../stream-emoji.json';\nvar UnMemoizedChannel = function (props) {\n  var propsChannel = props.channel,\n    _a = props.EmptyPlaceholder,\n    EmptyPlaceholder = _a === void 0 ? null : _a;\n  var contextChannel = useChatContext().channel;\n  var channel = propsChannel || contextChannel;\n  if (!(channel === null || channel === void 0 ? void 0 : channel.cid)) return EmptyPlaceholder;\n  return React.createElement(ChannelInner, __assign({}, props, {\n    channel: channel,\n    key: channel.cid\n  }));\n};\nvar ChannelInner = function (props) {\n  var acceptedFiles = props.acceptedFiles,\n    channel = props.channel,\n    children = props.children,\n    doMarkReadRequest = props.doMarkReadRequest,\n    doSendMessageRequest = props.doSendMessageRequest,\n    doUpdateMessageRequest = props.doUpdateMessageRequest,\n    _a = props.emojiData,\n    emojiData = _a === void 0 ? defaultEmojiData : _a,\n    _b = props.LoadingErrorIndicator,\n    LoadingErrorIndicator = _b === void 0 ? DefaultLoadingErrorIndicator : _b,\n    _c = props.LoadingIndicator,\n    LoadingIndicator = _c === void 0 ? DefaultLoadingIndicator : _c,\n    maxNumberOfFiles = props.maxNumberOfFiles,\n    _d = props.multipleUploads,\n    multipleUploads = _d === void 0 ? true : _d,\n    onMentionsClick = props.onMentionsClick,\n    onMentionsHover = props.onMentionsHover;\n  var _e = useChatContext(),\n    client = _e.client,\n    mutes = _e.mutes,\n    theme = _e.theme,\n    useImageFlagEmojisOnWindows = _e.useImageFlagEmojisOnWindows;\n  var t = useTranslationContext().t;\n  var _f = useState([]),\n    notifications = _f[0],\n    setNotifications = _f[1];\n  var _g = useState(),\n    quotedMessage = _g[0],\n    setQuotedMessage = _g[1];\n  var notificationTimeouts = [];\n  var _h = useReducer(channelReducer, initialState),\n    state = _h[0],\n    dispatch = _h[1];\n  var isMounted = useIsMounted();\n  var originalTitle = useRef('');\n  var lastRead = useRef(new Date());\n  var online = useRef(true);\n  var channelConfig = channel.getConfig();\n  var emojiConfig = {\n    commonEmoji: commonEmoji,\n    defaultMinimalEmojis: defaultMinimalEmojis,\n    emojiData: emojiData,\n    emojiSetDef: emojiSetDef\n  };\n  var throttledCopyStateFromChannel = useCallback(throttle(function () {\n    if (!channel) return;\n    dispatch({\n      channel: channel,\n      type: 'copyStateFromChannelOnEvent'\n    });\n  }, 500, {\n    leading: true,\n    trailing: true\n  }), [channel]);\n  var markRead = useCallback(function () {\n    var _a;\n    if (!channel || channel.disconnected || !((_a = channel.getConfig()) === null || _a === void 0 ? void 0 : _a.read_events)) {\n      return;\n    }\n    lastRead.current = new Date();\n    if (doMarkReadRequest) {\n      doMarkReadRequest(channel);\n    } else {\n      logChatPromiseExecution(channel.markRead(), 'mark read');\n    }\n    if (originalTitle.current) {\n      document.title = originalTitle.current;\n    }\n  }, [channel, doMarkReadRequest]);\n  var markReadThrottled = useCallback(throttle(markRead, 500, {\n    leading: true,\n    trailing: true\n  }), [markRead]);\n  var handleEvent = useCallback(function (event) {\n    var _a, _b, _c, _d, _e;\n    if (event.message) {\n      dispatch({\n        channel: channel,\n        message: event.message,\n        type: 'updateThreadOnEvent'\n      });\n    }\n    if (event.type === 'typing.start' || event.type === 'typing.stop') {\n      dispatch({\n        channel: channel,\n        type: 'setTyping'\n      });\n      return;\n    }\n    if (event.type === 'connection.changed' && typeof event.online === 'boolean') {\n      online.current = event.online;\n    }\n    if (event.type === 'message.new') {\n      var mainChannelUpdated = true;\n      if (((_a = event.message) === null || _a === void 0 ? void 0 : _a.parent_id) && !((_b = event.message) === null || _b === void 0 ? void 0 : _b.show_in_channel)) {\n        mainChannelUpdated = false;\n      }\n      if (mainChannelUpdated && ((_d = (_c = event.message) === null || _c === void 0 ? void 0 : _c.user) === null || _d === void 0 ? void 0 : _d.id) !== client.userID) {\n        if (!document.hidden) {\n          markReadThrottled();\n        } else if (((_e = channel.getConfig()) === null || _e === void 0 ? void 0 : _e.read_events) && !channel.muteStatus().muted) {\n          var unread = channel.countUnread(lastRead.current);\n          document.title = \"(\" + unread + \") \" + originalTitle.current;\n        }\n      }\n    }\n    throttledCopyStateFromChannel();\n  }, [channel, client.userID, markReadThrottled, throttledCopyStateFromChannel]);\n  // useLayoutEffect here to prevent spinner. Use Suspense when it is available in stable release\n  useLayoutEffect(function () {\n    var errored = false;\n    var done = false;\n    var onVisibilityChange = function () {\n      if (!document.hidden) {\n        markRead();\n      }\n    };\n    (function () {\n      return __awaiter(void 0, void 0, void 0, function () {\n        var e_1;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              if (!(channel && !channel.initialized)) return [3 /*break*/, 4];\n              _a.label = 1;\n            case 1:\n              _a.trys.push([1, 3,, 4]);\n              return [4 /*yield*/, channel.watch()];\n            case 2:\n              _a.sent();\n              return [3 /*break*/, 4];\n            case 3:\n              e_1 = _a.sent();\n              dispatch({\n                error: e_1,\n                type: 'setError'\n              });\n              errored = true;\n              return [3 /*break*/, 4];\n            case 4:\n              done = true;\n              originalTitle.current = document.title;\n              if (channel && !errored) {\n                dispatch({\n                  channel: channel,\n                  type: 'initStateFromChannel'\n                });\n                if (channel.countUnread() > 0) markRead();\n                // The more complex sync logic is done in Chat\n                document.addEventListener('visibilitychange', onVisibilityChange);\n                client.on('connection.changed', handleEvent);\n                client.on('connection.recovered', handleEvent);\n                client.on('user.updated', handleEvent);\n                client.on('user.deleted', handleEvent);\n                channel.on(handleEvent);\n              }\n              return [2 /*return*/];\n          }\n        });\n      });\n    })();\n    return function () {\n      if (errored || !done) return;\n      document.removeEventListener('visibilitychange', onVisibilityChange);\n      if (channel) channel.off(handleEvent);\n      client.off('connection.changed', handleEvent);\n      client.off('connection.recovered', handleEvent);\n      client.off('user.updated', handleEvent);\n      client.off('user.deleted', handleEvent);\n      notificationTimeouts.forEach(clearTimeout);\n    };\n  }, [channel, client, handleEvent, markRead]);\n  useEffect(function () {\n    var _a;\n    if (state.thread && ((_a = state.messages) === null || _a === void 0 ? void 0 : _a.length)) {\n      for (var i = state.messages.length - 1; i >= 0; i -= 1) {\n        if (state.messages[i].id === state.thread.id) {\n          dispatch({\n            message: state.messages[i],\n            type: 'setThread'\n          });\n          break;\n        }\n      }\n    }\n  }, [state.messages, state.thread]);\n  /** MESSAGE */\n  // Adds a temporary notification to message list, will be removed after 5 seconds\n  var addNotification = function (text, type) {\n    if (typeof text !== 'string' || type !== 'success' && type !== 'error') {\n      return;\n    }\n    var id = uuidv4();\n    setNotifications(function (prevNotifications) {\n      return __spreadArray(__spreadArray([], prevNotifications), [{\n        id: id,\n        text: text,\n        type: type\n      }]);\n    });\n    var timeout = setTimeout(function () {\n      return setNotifications(function (prevNotifications) {\n        return prevNotifications.filter(function (notification) {\n          return notification.id !== id;\n        });\n      });\n    }, 5000);\n    notificationTimeouts.push(timeout);\n  };\n  var loadMoreFinished = useCallback(debounce(function (hasMore, messages) {\n    if (!isMounted.current) return;\n    dispatch({\n      hasMore: hasMore,\n      messages: messages,\n      type: 'loadMoreFinished'\n    });\n  }, 2000, {\n    leading: true,\n    trailing: true\n  }), []);\n  var loadMore = useCallback(\n  // eslint-disable-next-line @typescript-eslint/no-inferrable-types\n  function (limit) {\n    if (limit === void 0) {\n      limit = 100;\n    }\n    return __awaiter(void 0, void 0, void 0, function () {\n      var oldestMessage, oldestID, perPage, queryResponse, e_2, hasMoreMessages;\n      var _a;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (!online.current || !window.navigator.onLine || !channel) return [2 /*return*/, 0];\n            oldestMessage = (_a = state === null || state === void 0 ? void 0 : state.messages) === null || _a === void 0 ? void 0 : _a[0];\n            if (state.loadingMore || (oldestMessage === null || oldestMessage === void 0 ? void 0 : oldestMessage.status) !== 'received') return [2 /*return*/, 0];\n            // initial state loads with up to 25 messages, so if less than 25 no need for additional query\n            if (channel.state.messages.length < 25) {\n              loadMoreFinished(false, channel.state.messages);\n              return [2 /*return*/, channel.state.messages.length];\n            }\n            dispatch({\n              loadingMore: true,\n              type: 'setLoadingMore'\n            });\n            oldestID = oldestMessage === null || oldestMessage === void 0 ? void 0 : oldestMessage.id;\n            perPage = limit;\n            _b.label = 1;\n          case 1:\n            _b.trys.push([1, 3,, 4]);\n            return [4 /*yield*/, channel.query({\n              messages: {\n                id_lt: oldestID,\n                limit: perPage\n              },\n              watchers: {\n                limit: perPage\n              }\n            })];\n          case 2:\n            queryResponse = _b.sent();\n            return [3 /*break*/, 4];\n          case 3:\n            e_2 = _b.sent();\n            console.warn('message pagination request failed with error', e_2);\n            dispatch({\n              loadingMore: false,\n              type: 'setLoadingMore'\n            });\n            return [2 /*return*/, 0];\n          case 4:\n            hasMoreMessages = queryResponse.messages.length === perPage;\n            loadMoreFinished(hasMoreMessages, channel.state.messages);\n            return [2 /*return*/, queryResponse.messages.length];\n        }\n      });\n    });\n  }, [channel, loadMoreFinished, online, state.loadingMore, state.messages]);\n  var updateMessage = useCallback(function (updatedMessage) {\n    if (!channel) return;\n    // adds the message to the local channel state..\n    // this adds to both the main channel state as well as any reply threads\n    channel.state.addMessageSorted(updatedMessage, true);\n    dispatch({\n      channel: channel,\n      parentId: state.thread && updatedMessage.parent_id,\n      type: 'copyMessagesFromChannel'\n    });\n  }, [channel, state.thread]);\n  var isUserResponseArray = function (output) {\n    var _a;\n    return ((_a = output[0]) === null || _a === void 0 ? void 0 : _a.id) != null;\n  };\n  var doSendMessage = useCallback(function (message, customMessageData) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var attachments, id, _a, mentioned_users, parent_id, text, mentions, messageData, messageResponse, error_1, stringError, parsedError;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (!channel) return [2 /*return*/];\n            attachments = message.attachments, id = message.id, _a = message.mentioned_users, mentioned_users = _a === void 0 ? [] : _a, parent_id = message.parent_id, text = message.text;\n            mentions = isUserResponseArray(mentioned_users) ? mentioned_users.map(function (_a) {\n              var id = _a.id;\n              return id;\n            }) : mentioned_users;\n            messageData = __assign({\n              attachments: attachments,\n              id: id,\n              mentioned_users: mentions,\n              parent_id: parent_id,\n              quoted_message_id: quotedMessage === null || quotedMessage === void 0 ? void 0 : quotedMessage.id,\n              text: text\n            }, customMessageData);\n            _b.label = 1;\n          case 1:\n            _b.trys.push([1, 6,, 7]);\n            messageResponse = void 0;\n            if (!doSendMessageRequest) return [3 /*break*/, 3];\n            return [4 /*yield*/, doSendMessageRequest(channel.cid, messageData)];\n          case 2:\n            messageResponse = _b.sent();\n            return [3 /*break*/, 5];\n          case 3:\n            return [4 /*yield*/, channel.sendMessage(messageData)];\n          case 4:\n            messageResponse = _b.sent();\n            _b.label = 5;\n          case 5:\n            // replace it after send is completed\n            if (messageResponse && messageResponse.message) {\n              updateMessage(__assign(__assign({}, messageResponse.message), {\n                status: 'received'\n              }));\n            }\n            if (quotedMessage) setQuotedMessage(undefined);\n            return [3 /*break*/, 7];\n          case 6:\n            error_1 = _b.sent();\n            stringError = JSON.stringify(error_1);\n            parsedError = stringError ? JSON.parse(stringError) : {};\n            updateMessage(__assign(__assign({}, message), {\n              errorStatusCode: parsedError.status || undefined,\n              status: 'failed'\n            }));\n            return [3 /*break*/, 7];\n          case 7:\n            return [2 /*return*/];\n        }\n      });\n    });\n  }, [channel, doSendMessageRequest, quotedMessage, updateMessage]);\n  var createMessagePreview = useCallback(function (text, attachments, parent, mentioned_users) {\n    // create a preview of the message\n    var clientSideID = client.userID + \"-\" + uuidv4();\n    return __assign({\n      __html: text,\n      attachments: attachments,\n      created_at: new Date(),\n      html: text,\n      id: clientSideID,\n      mentioned_users: mentioned_users,\n      reactions: [],\n      status: 'sending',\n      text: text,\n      type: 'regular',\n      user: client.user\n    }, (parent === null || parent === void 0 ? void 0 : parent.id) ? {\n      parent_id: parent.id\n    } : null);\n  }, [client.user, client.userID]);\n  var sendMessage = useCallback(function (_a, customMessageData) {\n    var _b = _a.attachments,\n      attachments = _b === void 0 ? [] : _b,\n      _c = _a.mentioned_users,\n      mentioned_users = _c === void 0 ? [] : _c,\n      _d = _a.parent,\n      parent = _d === void 0 ? undefined : _d,\n      _e = _a.text,\n      text = _e === void 0 ? '' : _e;\n    return __awaiter(void 0, void 0, void 0, function () {\n      var messagePreview;\n      return __generator(this, function (_f) {\n        switch (_f.label) {\n          case 0:\n            if (!channel) return [2 /*return*/];\n            // remove error messages upon submit\n            channel.state.filterErrorMessages();\n            messagePreview = createMessagePreview(text, attachments, parent, mentioned_users);\n            // first we add the message to the UI\n            updateMessage(messagePreview);\n            return [4 /*yield*/, doSendMessage(messagePreview, customMessageData)];\n          case 1:\n            _f.sent();\n            return [2 /*return*/];\n        }\n      });\n    });\n  }, [channel === null || channel === void 0 ? void 0 : channel.state, createMessagePreview, doSendMessage, updateMessage]);\n  var retrySendMessage = useCallback(function (message) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            // set the message status to sending\n            updateMessage(__assign(__assign({}, message), {\n              errorStatusCode: undefined,\n              status: 'sending'\n            }));\n            // actually try to send the message...\n            return [4 /*yield*/, doSendMessage(message)];\n          case 1:\n            // actually try to send the message...\n            _a.sent();\n            return [2 /*return*/];\n        }\n      });\n    });\n  }, [doSendMessage, updateMessage]);\n  var removeMessage = useCallback(function (message) {\n    if (!channel) return;\n    channel.state.removeMessage(message);\n    dispatch({\n      channel: channel,\n      parentId: state.thread && message.parent_id,\n      type: 'copyMessagesFromChannel'\n    });\n  }, [channel, state.thread]);\n  /** THREAD */\n  var openThread = useCallback(function (message, event) {\n    if (!channel) return;\n    if (event && event.preventDefault) {\n      event.preventDefault();\n    }\n    dispatch({\n      channel: channel,\n      message: message,\n      type: 'openThread'\n    });\n  }, [channel]);\n  var loadMoreThreadFinished = useCallback(debounce(function (threadHasMore, threadMessages) {\n    dispatch({\n      threadHasMore: threadHasMore,\n      threadMessages: threadMessages,\n      type: 'loadMoreThreadFinished'\n    });\n  }, 2000, {\n    leading: true,\n    trailing: true\n  }), []);\n  var loadMoreThread = useCallback(function () {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var parentID, oldMessages, oldestMessageID, limit, queryResponse, threadHasMoreMessages, newThreadMessages, e_3;\n      var _a;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            // prevent duplicate loading events...\n            if (!channel || state.threadLoadingMore || !state.thread) return [2 /*return*/];\n            dispatch({\n              type: 'startLoadingThread'\n            });\n            parentID = state.thread.id;\n            if (!parentID) {\n              dispatch({\n                type: 'closeThread'\n              });\n              return [2 /*return*/];\n            }\n            oldMessages = channel.state.threads[parentID] || [];\n            oldestMessageID = (_a = oldMessages[0]) === null || _a === void 0 ? void 0 : _a.id;\n            limit = 50;\n            _b.label = 1;\n          case 1:\n            _b.trys.push([1, 3,, 4]);\n            return [4 /*yield*/, channel.getReplies(parentID, {\n              id_lt: oldestMessageID,\n              limit: limit\n            })];\n          case 2:\n            queryResponse = _b.sent();\n            threadHasMoreMessages = queryResponse.messages.length === limit;\n            newThreadMessages = channel.state.threads[parentID] || [];\n            // next set loadingMore to false so we can start asking for more data...\n            loadMoreThreadFinished(threadHasMoreMessages, newThreadMessages);\n            return [3 /*break*/, 4];\n          case 3:\n            e_3 = _b.sent();\n            loadMoreThreadFinished(false, oldMessages);\n            return [3 /*break*/, 4];\n          case 4:\n            return [2 /*return*/];\n        }\n      });\n    });\n  }, [channel, loadMoreThreadFinished, state.thread, state.threadLoadingMore]);\n  var closeThread = useCallback(function (event) {\n    if (event && event.preventDefault) {\n      event.preventDefault();\n    }\n    dispatch({\n      type: 'closeThread'\n    });\n  }, []);\n  var onMentionsHoverOrClick = useMentionsHandlers(onMentionsHover, onMentionsClick);\n  var editMessage = useEditMessageHandler(doUpdateMessageRequest);\n  var typing = state.typing,\n    restState = __rest(state, [\"typing\"]);\n  var channelStateContextValue = __assign(__assign({}, restState), {\n    acceptedFiles: acceptedFiles,\n    channel: channel,\n    channelConfig: channelConfig,\n    maxNumberOfFiles: maxNumberOfFiles,\n    multipleUploads: multipleUploads,\n    mutes: mutes,\n    notifications: notifications,\n    quotedMessage: quotedMessage,\n    watcher_count: state.watcherCount\n  });\n  var channelActionContextValue = {\n    addNotification: addNotification,\n    closeThread: closeThread,\n    dispatch: dispatch,\n    editMessage: editMessage,\n    loadMore: loadMore,\n    loadMoreThread: loadMoreThread,\n    onMentionsClick: onMentionsHoverOrClick,\n    onMentionsHover: onMentionsHoverOrClick,\n    openThread: openThread,\n    removeMessage: removeMessage,\n    retrySendMessage: retrySendMessage,\n    sendMessage: sendMessage,\n    setQuotedMessage: setQuotedMessage,\n    updateMessage: updateMessage\n  };\n  var componentContextValue = useMemo(function () {\n    return {\n      Attachment: props.Attachment || DefaultAttachment,\n      AutocompleteSuggestionHeader: props.AutocompleteSuggestionHeader,\n      AutocompleteSuggestionItem: props.AutocompleteSuggestionItem,\n      AutocompleteSuggestionList: props.AutocompleteSuggestionList,\n      Avatar: props.Avatar,\n      CooldownTimer: props.CooldownTimer,\n      DateSeparator: props.DateSeparator,\n      EditMessageInput: props.EditMessageInput,\n      EmojiIcon: props.EmojiIcon,\n      EmptyStateIndicator: props.EmptyStateIndicator,\n      FileUploadIcon: props.FileUploadIcon,\n      GiphyPreviewMessage: props.GiphyPreviewMessage,\n      HeaderComponent: props.HeaderComponent,\n      Input: props.Input,\n      LoadingIndicator: props.LoadingIndicator,\n      Message: props.Message || MessageSimple,\n      MessageDeleted: props.MessageDeleted,\n      MessageListNotifications: props.MessageListNotifications,\n      MessageNotification: props.MessageNotification,\n      MessageOptions: props.MessageOptions,\n      MessageRepliesCountButton: props.MessageRepliesCountButton,\n      MessageStatus: props.MessageStatus,\n      MessageSystem: props.MessageSystem,\n      MessageTimestamp: props.MessageTimestamp,\n      PinIndicator: props.PinIndicator,\n      QuotedMessage: props.QuotedMessage,\n      QuotedMessagePreview: props.QuotedMessagePreview,\n      ReactionSelector: props.ReactionSelector,\n      ReactionsList: props.ReactionsList,\n      SendButton: props.SendButton,\n      ThreadHeader: props.ThreadHeader,\n      ThreadStart: props.ThreadStart,\n      TriggerProvider: props.TriggerProvider,\n      TypingIndicator: props.TypingIndicator,\n      VirtualMessage: props.VirtualMessage\n    };\n  }, []);\n  var emojiContextValue = useMemo(function () {\n    return {\n      Emoji: props.Emoji,\n      emojiConfig: emojiConfig,\n      EmojiIndex: props.EmojiIndex,\n      EmojiPicker: props.EmojiPicker\n    };\n  }, []);\n  var typingContextValue = {\n    typing: typing\n  };\n  if (state.error) {\n    return React.createElement(\"div\", {\n      className: \"str-chat str-chat-channel \" + theme\n    }, React.createElement(LoadingErrorIndicator, {\n      error: state.error\n    }));\n  }\n  if (state.loading) {\n    return React.createElement(\"div\", {\n      className: \"str-chat str-chat-channel \" + theme\n    }, React.createElement(LoadingIndicator, {\n      size: 25\n    }));\n  }\n  if (!(channel === null || channel === void 0 ? void 0 : channel.watch)) {\n    return React.createElement(\"div\", {\n      className: \"str-chat str-chat-channel \" + theme\n    }, React.createElement(\"div\", null, t('Channel Missing')));\n  }\n  return React.createElement(\"div\", {\n    className: \"str-chat str-chat-channel \" + theme + (useImageFlagEmojisOnWindows && navigator.platform.match(/Win/) ? ' str-chat--windows-flags' : '')\n  }, React.createElement(ChannelStateProvider, {\n    value: channelStateContextValue\n  }, React.createElement(ChannelActionProvider, {\n    value: channelActionContextValue\n  }, React.createElement(ComponentProvider, {\n    value: componentContextValue\n  }, React.createElement(EmojiProvider, {\n    value: emojiContextValue\n  }, React.createElement(TypingProvider, {\n    value: typingContextValue\n  }, React.createElement(\"div\", {\n    className: 'str-chat__container'\n  }, children)))))));\n};\n/**\n * A wrapper component that provides channel data and renders children.\n * The Channel component provides the following contexts:\n * - [ChannelStateContext](https://getstream.io/chat/docs/sdk/react/contexts/channel_state_context/)\n * - [ChannelActionContext](https://getstream.io/chat/docs/sdk/react/contexts/channel_action_context/)\n * - [ComponentContext](https://getstream.io/chat/docs/sdk/react/contexts/component_context/)\n * - [EmojiContext](https://getstream.io/chat/docs/sdk/react/contexts/emoji_context/)\n * - [TypingContext](https://getstream.io/chat/docs/sdk/react/contexts/typing_context/)\n */\nexport var Channel = React.memo(UnMemoizedChannel);","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","__rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__spreadArray","to","from","il","j","React","useCallback","useEffect","useLayoutEffect","useMemo","useReducer","useRef","useState","debounce","throttle","logChatPromiseExecution","v4","uuidv4","channelReducer","initialState","commonEmoji","defaultMinimalEmojis","emojiSetDef","useEditMessageHandler","useIsMounted","useMentionsHandlers","Attachment","DefaultAttachment","LoadingErrorIndicator","DefaultLoadingErrorIndicator","LoadingIndicator","DefaultLoadingIndicator","MessageSimple","ChannelActionProvider","ChannelStateProvider","ComponentProvider","useChatContext","EmojiProvider","useTranslationContext","TypingProvider","defaultEmojiData","UnMemoizedChannel","props","propsChannel","channel","_a","EmptyPlaceholder","contextChannel","cid","createElement","ChannelInner","key","acceptedFiles","children","doMarkReadRequest","doSendMessageRequest","doUpdateMessageRequest","emojiData","_b","_c","maxNumberOfFiles","_d","multipleUploads","onMentionsClick","onMentionsHover","_e","client","mutes","theme","useImageFlagEmojisOnWindows","_f","notifications","setNotifications","_g","quotedMessage","setQuotedMessage","notificationTimeouts","_h","state","dispatch","isMounted","originalTitle","lastRead","Date","online","channelConfig","getConfig","emojiConfig","throttledCopyStateFromChannel","type","leading","trailing","markRead","disconnected","read_events","current","document","title","markReadThrottled","handleEvent","event","message","mainChannelUpdated","parent_id","show_in_channel","user","id","userID","hidden","muteStatus","muted","unread","countUnread","errored","onVisibilityChange","e_1","initialized","watch","error","addEventListener","on","removeEventListener","off","forEach","clearTimeout","thread","messages","addNotification","text","prevNotifications","timeout","setTimeout","filter","notification","loadMoreFinished","hasMore","loadMore","limit","oldestMessage","oldestID","perPage","queryResponse","e_2","hasMoreMessages","window","navigator","onLine","loadingMore","status","query","id_lt","watchers","console","warn","updateMessage","updatedMessage","addMessageSorted","parentId","isUserResponseArray","output","doSendMessage","customMessageData","attachments","mentioned_users","mentions","messageData","messageResponse","error_1","stringError","parsedError","map","quoted_message_id","sendMessage","undefined","JSON","stringify","parse","errorStatusCode","createMessagePreview","parent","clientSideID","__html","created_at","html","reactions","messagePreview","filterErrorMessages","retrySendMessage","removeMessage","openThread","preventDefault","loadMoreThreadFinished","threadHasMore","threadMessages","loadMoreThread","parentID","oldMessages","oldestMessageID","threadHasMoreMessages","newThreadMessages","e_3","threadLoadingMore","threads","getReplies","closeThread","onMentionsHoverOrClick","editMessage","typing","restState","channelStateContextValue","watcher_count","watcherCount","channelActionContextValue","componentContextValue","AutocompleteSuggestionHeader","AutocompleteSuggestionItem","AutocompleteSuggestionList","Avatar","CooldownTimer","DateSeparator","EditMessageInput","EmojiIcon","EmptyStateIndicator","FileUploadIcon","GiphyPreviewMessage","HeaderComponent","Input","Message","MessageDeleted","MessageListNotifications","MessageNotification","MessageOptions","MessageRepliesCountButton","MessageStatus","MessageSystem","MessageTimestamp","PinIndicator","QuotedMessage","QuotedMessagePreview","ReactionSelector","ReactionsList","SendButton","ThreadHeader","ThreadStart","TriggerProvider","TypingIndicator","VirtualMessage","emojiContextValue","Emoji","EmojiIndex","EmojiPicker","typingContextValue","className","loading","size","platform","match","Channel","memo"],"sources":["C:/Users/alekh/Desktop/Medical-App/client/node_modules/stream-chat-react/dist/components/Channel/Channel.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nimport React, { useCallback, useEffect, useLayoutEffect, useMemo, useReducer, useRef, useState, } from 'react';\nimport debounce from 'lodash.debounce';\nimport throttle from 'lodash.throttle';\nimport { logChatPromiseExecution, } from 'stream-chat';\nimport { v4 as uuidv4 } from 'uuid';\nimport { channelReducer, initialState } from './channelState';\nimport { commonEmoji, defaultMinimalEmojis, emojiSetDef } from './emojiData';\nimport { useEditMessageHandler } from './hooks/useEditMessageHandler';\nimport { useIsMounted } from './hooks/useIsMounted';\nimport { useMentionsHandlers } from './hooks/useMentionsHandlers';\nimport { Attachment as DefaultAttachment } from '../Attachment/Attachment';\nimport { LoadingErrorIndicator as DefaultLoadingErrorIndicator, LoadingIndicator as DefaultLoadingIndicator, } from '../Loading';\nimport { MessageSimple } from '../Message/MessageSimple';\nimport { ChannelActionProvider, } from '../../context/ChannelActionContext';\nimport { ChannelStateProvider, } from '../../context/ChannelStateContext';\nimport { ComponentProvider } from '../../context/ComponentContext';\nimport { useChatContext } from '../../context/ChatContext';\nimport { EmojiProvider } from '../../context/EmojiContext';\nimport { useTranslationContext } from '../../context/TranslationContext';\nimport { TypingProvider } from '../../context/TypingContext';\nimport defaultEmojiData from '../../stream-emoji.json';\nvar UnMemoizedChannel = function (props) {\n    var propsChannel = props.channel, _a = props.EmptyPlaceholder, EmptyPlaceholder = _a === void 0 ? null : _a;\n    var contextChannel = useChatContext().channel;\n    var channel = propsChannel || contextChannel;\n    if (!(channel === null || channel === void 0 ? void 0 : channel.cid))\n        return EmptyPlaceholder;\n    return React.createElement(ChannelInner, __assign({}, props, { channel: channel, key: channel.cid }));\n};\nvar ChannelInner = function (props) {\n    var acceptedFiles = props.acceptedFiles, channel = props.channel, children = props.children, doMarkReadRequest = props.doMarkReadRequest, doSendMessageRequest = props.doSendMessageRequest, doUpdateMessageRequest = props.doUpdateMessageRequest, _a = props.emojiData, emojiData = _a === void 0 ? defaultEmojiData : _a, _b = props.LoadingErrorIndicator, LoadingErrorIndicator = _b === void 0 ? DefaultLoadingErrorIndicator : _b, _c = props.LoadingIndicator, LoadingIndicator = _c === void 0 ? DefaultLoadingIndicator : _c, maxNumberOfFiles = props.maxNumberOfFiles, _d = props.multipleUploads, multipleUploads = _d === void 0 ? true : _d, onMentionsClick = props.onMentionsClick, onMentionsHover = props.onMentionsHover;\n    var _e = useChatContext(), client = _e.client, mutes = _e.mutes, theme = _e.theme, useImageFlagEmojisOnWindows = _e.useImageFlagEmojisOnWindows;\n    var t = useTranslationContext().t;\n    var _f = useState([]), notifications = _f[0], setNotifications = _f[1];\n    var _g = useState(), quotedMessage = _g[0], setQuotedMessage = _g[1];\n    var notificationTimeouts = [];\n    var _h = useReducer(channelReducer, initialState), state = _h[0], dispatch = _h[1];\n    var isMounted = useIsMounted();\n    var originalTitle = useRef('');\n    var lastRead = useRef(new Date());\n    var online = useRef(true);\n    var channelConfig = channel.getConfig();\n    var emojiConfig = {\n        commonEmoji: commonEmoji,\n        defaultMinimalEmojis: defaultMinimalEmojis,\n        emojiData: emojiData,\n        emojiSetDef: emojiSetDef,\n    };\n    var throttledCopyStateFromChannel = useCallback(throttle(function () {\n        if (!channel)\n            return;\n        dispatch({ channel: channel, type: 'copyStateFromChannelOnEvent' });\n    }, 500, { leading: true, trailing: true }), [channel]);\n    var markRead = useCallback(function () {\n        var _a;\n        if (!channel || channel.disconnected || !((_a = channel.getConfig()) === null || _a === void 0 ? void 0 : _a.read_events)) {\n            return;\n        }\n        lastRead.current = new Date();\n        if (doMarkReadRequest) {\n            doMarkReadRequest(channel);\n        }\n        else {\n            logChatPromiseExecution(channel.markRead(), 'mark read');\n        }\n        if (originalTitle.current) {\n            document.title = originalTitle.current;\n        }\n    }, [channel, doMarkReadRequest]);\n    var markReadThrottled = useCallback(throttle(markRead, 500, { leading: true, trailing: true }), [markRead]);\n    var handleEvent = useCallback(function (event) {\n        var _a, _b, _c, _d, _e;\n        if (event.message) {\n            dispatch({\n                channel: channel,\n                message: event.message,\n                type: 'updateThreadOnEvent',\n            });\n        }\n        if (event.type === 'typing.start' || event.type === 'typing.stop') {\n            dispatch({\n                channel: channel,\n                type: 'setTyping',\n            });\n            return;\n        }\n        if (event.type === 'connection.changed' && typeof event.online === 'boolean') {\n            online.current = event.online;\n        }\n        if (event.type === 'message.new') {\n            var mainChannelUpdated = true;\n            if (((_a = event.message) === null || _a === void 0 ? void 0 : _a.parent_id) && !((_b = event.message) === null || _b === void 0 ? void 0 : _b.show_in_channel)) {\n                mainChannelUpdated = false;\n            }\n            if (mainChannelUpdated && ((_d = (_c = event.message) === null || _c === void 0 ? void 0 : _c.user) === null || _d === void 0 ? void 0 : _d.id) !== client.userID) {\n                if (!document.hidden) {\n                    markReadThrottled();\n                }\n                else if (((_e = channel.getConfig()) === null || _e === void 0 ? void 0 : _e.read_events) && !channel.muteStatus().muted) {\n                    var unread = channel.countUnread(lastRead.current);\n                    document.title = \"(\" + unread + \") \" + originalTitle.current;\n                }\n            }\n        }\n        throttledCopyStateFromChannel();\n    }, [channel, client.userID, markReadThrottled, throttledCopyStateFromChannel]);\n    // useLayoutEffect here to prevent spinner. Use Suspense when it is available in stable release\n    useLayoutEffect(function () {\n        var errored = false;\n        var done = false;\n        var onVisibilityChange = function () {\n            if (!document.hidden) {\n                markRead();\n            }\n        };\n        (function () { return __awaiter(void 0, void 0, void 0, function () {\n            var e_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(channel && !channel.initialized)) return [3 /*break*/, 4];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, channel.watch()];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_1 = _a.sent();\n                        dispatch({ error: e_1, type: 'setError' });\n                        errored = true;\n                        return [3 /*break*/, 4];\n                    case 4:\n                        done = true;\n                        originalTitle.current = document.title;\n                        if (channel && !errored) {\n                            dispatch({ channel: channel, type: 'initStateFromChannel' });\n                            if (channel.countUnread() > 0)\n                                markRead();\n                            // The more complex sync logic is done in Chat\n                            document.addEventListener('visibilitychange', onVisibilityChange);\n                            client.on('connection.changed', handleEvent);\n                            client.on('connection.recovered', handleEvent);\n                            client.on('user.updated', handleEvent);\n                            client.on('user.deleted', handleEvent);\n                            channel.on(handleEvent);\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        }); })();\n        return function () {\n            if (errored || !done)\n                return;\n            document.removeEventListener('visibilitychange', onVisibilityChange);\n            if (channel)\n                channel.off(handleEvent);\n            client.off('connection.changed', handleEvent);\n            client.off('connection.recovered', handleEvent);\n            client.off('user.updated', handleEvent);\n            client.off('user.deleted', handleEvent);\n            notificationTimeouts.forEach(clearTimeout);\n        };\n    }, [channel, client, handleEvent, markRead]);\n    useEffect(function () {\n        var _a;\n        if (state.thread && ((_a = state.messages) === null || _a === void 0 ? void 0 : _a.length)) {\n            for (var i = state.messages.length - 1; i >= 0; i -= 1) {\n                if (state.messages[i].id === state.thread.id) {\n                    dispatch({ message: state.messages[i], type: 'setThread' });\n                    break;\n                }\n            }\n        }\n    }, [state.messages, state.thread]);\n    /** MESSAGE */\n    // Adds a temporary notification to message list, will be removed after 5 seconds\n    var addNotification = function (text, type) {\n        if (typeof text !== 'string' || (type !== 'success' && type !== 'error')) {\n            return;\n        }\n        var id = uuidv4();\n        setNotifications(function (prevNotifications) { return __spreadArray(__spreadArray([], prevNotifications), [{ id: id, text: text, type: type }]); });\n        var timeout = setTimeout(function () {\n            return setNotifications(function (prevNotifications) {\n                return prevNotifications.filter(function (notification) { return notification.id !== id; });\n            });\n        }, 5000);\n        notificationTimeouts.push(timeout);\n    };\n    var loadMoreFinished = useCallback(debounce(function (hasMore, messages) {\n        if (!isMounted.current)\n            return;\n        dispatch({ hasMore: hasMore, messages: messages, type: 'loadMoreFinished' });\n    }, 2000, {\n        leading: true,\n        trailing: true,\n    }), []);\n    var loadMore = useCallback(\n    // eslint-disable-next-line @typescript-eslint/no-inferrable-types\n    function (limit) {\n        if (limit === void 0) { limit = 100; }\n        return __awaiter(void 0, void 0, void 0, function () {\n            var oldestMessage, oldestID, perPage, queryResponse, e_2, hasMoreMessages;\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!online.current || !window.navigator.onLine || !channel)\n                            return [2 /*return*/, 0];\n                        oldestMessage = (_a = state === null || state === void 0 ? void 0 : state.messages) === null || _a === void 0 ? void 0 : _a[0];\n                        if (state.loadingMore || (oldestMessage === null || oldestMessage === void 0 ? void 0 : oldestMessage.status) !== 'received')\n                            return [2 /*return*/, 0];\n                        // initial state loads with up to 25 messages, so if less than 25 no need for additional query\n                        if (channel.state.messages.length < 25) {\n                            loadMoreFinished(false, channel.state.messages);\n                            return [2 /*return*/, channel.state.messages.length];\n                        }\n                        dispatch({ loadingMore: true, type: 'setLoadingMore' });\n                        oldestID = oldestMessage === null || oldestMessage === void 0 ? void 0 : oldestMessage.id;\n                        perPage = limit;\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, channel.query({\n                                messages: { id_lt: oldestID, limit: perPage },\n                                watchers: { limit: perPage },\n                            })];\n                    case 2:\n                        queryResponse = _b.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_2 = _b.sent();\n                        console.warn('message pagination request failed with error', e_2);\n                        dispatch({ loadingMore: false, type: 'setLoadingMore' });\n                        return [2 /*return*/, 0];\n                    case 4:\n                        hasMoreMessages = queryResponse.messages.length === perPage;\n                        loadMoreFinished(hasMoreMessages, channel.state.messages);\n                        return [2 /*return*/, queryResponse.messages.length];\n                }\n            });\n        });\n    }, [channel, loadMoreFinished, online, state.loadingMore, state.messages]);\n    var updateMessage = useCallback(function (updatedMessage) {\n        if (!channel)\n            return;\n        // adds the message to the local channel state..\n        // this adds to both the main channel state as well as any reply threads\n        channel.state.addMessageSorted(updatedMessage, true);\n        dispatch({\n            channel: channel,\n            parentId: state.thread && updatedMessage.parent_id,\n            type: 'copyMessagesFromChannel',\n        });\n    }, [channel, state.thread]);\n    var isUserResponseArray = function (output) { var _a; return ((_a = output[0]) === null || _a === void 0 ? void 0 : _a.id) != null; };\n    var doSendMessage = useCallback(function (message, customMessageData) { return __awaiter(void 0, void 0, void 0, function () {\n        var attachments, id, _a, mentioned_users, parent_id, text, mentions, messageData, messageResponse, error_1, stringError, parsedError;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    if (!channel)\n                        return [2 /*return*/];\n                    attachments = message.attachments, id = message.id, _a = message.mentioned_users, mentioned_users = _a === void 0 ? [] : _a, parent_id = message.parent_id, text = message.text;\n                    mentions = isUserResponseArray(mentioned_users)\n                        ? mentioned_users.map(function (_a) {\n                            var id = _a.id;\n                            return id;\n                        })\n                        : mentioned_users;\n                    messageData = __assign({ attachments: attachments, id: id, mentioned_users: mentions, parent_id: parent_id, quoted_message_id: quotedMessage === null || quotedMessage === void 0 ? void 0 : quotedMessage.id, text: text }, customMessageData);\n                    _b.label = 1;\n                case 1:\n                    _b.trys.push([1, 6, , 7]);\n                    messageResponse = void 0;\n                    if (!doSendMessageRequest) return [3 /*break*/, 3];\n                    return [4 /*yield*/, doSendMessageRequest(channel.cid, messageData)];\n                case 2:\n                    messageResponse = _b.sent();\n                    return [3 /*break*/, 5];\n                case 3: return [4 /*yield*/, channel.sendMessage(messageData)];\n                case 4:\n                    messageResponse = _b.sent();\n                    _b.label = 5;\n                case 5:\n                    // replace it after send is completed\n                    if (messageResponse && messageResponse.message) {\n                        updateMessage(__assign(__assign({}, messageResponse.message), { status: 'received' }));\n                    }\n                    if (quotedMessage)\n                        setQuotedMessage(undefined);\n                    return [3 /*break*/, 7];\n                case 6:\n                    error_1 = _b.sent();\n                    stringError = JSON.stringify(error_1);\n                    parsedError = stringError ? JSON.parse(stringError) : {};\n                    updateMessage(__assign(__assign({}, message), { errorStatusCode: parsedError.status || undefined, status: 'failed' }));\n                    return [3 /*break*/, 7];\n                case 7: return [2 /*return*/];\n            }\n        });\n    }); }, [channel, doSendMessageRequest, quotedMessage, updateMessage]);\n    var createMessagePreview = useCallback(function (text, attachments, parent, mentioned_users) {\n        // create a preview of the message\n        var clientSideID = client.userID + \"-\" + uuidv4();\n        return __assign({ __html: text, attachments: attachments, created_at: new Date(), html: text, id: clientSideID, mentioned_users: mentioned_users, reactions: [], status: 'sending', text: text, type: 'regular', user: client.user }, ((parent === null || parent === void 0 ? void 0 : parent.id) ? { parent_id: parent.id } : null));\n    }, [client.user, client.userID]);\n    var sendMessage = useCallback(function (_a, customMessageData) {\n        var _b = _a.attachments, attachments = _b === void 0 ? [] : _b, _c = _a.mentioned_users, mentioned_users = _c === void 0 ? [] : _c, _d = _a.parent, parent = _d === void 0 ? undefined : _d, _e = _a.text, text = _e === void 0 ? '' : _e;\n        return __awaiter(void 0, void 0, void 0, function () {\n            var messagePreview;\n            return __generator(this, function (_f) {\n                switch (_f.label) {\n                    case 0:\n                        if (!channel)\n                            return [2 /*return*/];\n                        // remove error messages upon submit\n                        channel.state.filterErrorMessages();\n                        messagePreview = createMessagePreview(text, attachments, parent, mentioned_users);\n                        // first we add the message to the UI\n                        updateMessage(messagePreview);\n                        return [4 /*yield*/, doSendMessage(messagePreview, customMessageData)];\n                    case 1:\n                        _f.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    }, [channel === null || channel === void 0 ? void 0 : channel.state, createMessagePreview, doSendMessage, updateMessage]);\n    var retrySendMessage = useCallback(function (message) { return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    // set the message status to sending\n                    updateMessage(__assign(__assign({}, message), { errorStatusCode: undefined, status: 'sending' }));\n                    // actually try to send the message...\n                    return [4 /*yield*/, doSendMessage(message)];\n                case 1:\n                    // actually try to send the message...\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    }); }, [doSendMessage, updateMessage]);\n    var removeMessage = useCallback(function (message) {\n        if (!channel)\n            return;\n        channel.state.removeMessage(message);\n        dispatch({\n            channel: channel,\n            parentId: state.thread && message.parent_id,\n            type: 'copyMessagesFromChannel',\n        });\n    }, [channel, state.thread]);\n    /** THREAD */\n    var openThread = useCallback(function (message, event) {\n        if (!channel)\n            return;\n        if (event && event.preventDefault) {\n            event.preventDefault();\n        }\n        dispatch({ channel: channel, message: message, type: 'openThread' });\n    }, [channel]);\n    var loadMoreThreadFinished = useCallback(debounce(function (threadHasMore, threadMessages) {\n        dispatch({\n            threadHasMore: threadHasMore,\n            threadMessages: threadMessages,\n            type: 'loadMoreThreadFinished',\n        });\n    }, 2000, { leading: true, trailing: true }), []);\n    var loadMoreThread = useCallback(function () { return __awaiter(void 0, void 0, void 0, function () {\n        var parentID, oldMessages, oldestMessageID, limit, queryResponse, threadHasMoreMessages, newThreadMessages, e_3;\n        var _a;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    // prevent duplicate loading events...\n                    if (!channel || state.threadLoadingMore || !state.thread)\n                        return [2 /*return*/];\n                    dispatch({ type: 'startLoadingThread' });\n                    parentID = state.thread.id;\n                    if (!parentID) {\n                        dispatch({ type: 'closeThread' });\n                        return [2 /*return*/];\n                    }\n                    oldMessages = channel.state.threads[parentID] || [];\n                    oldestMessageID = (_a = oldMessages[0]) === null || _a === void 0 ? void 0 : _a.id;\n                    limit = 50;\n                    _b.label = 1;\n                case 1:\n                    _b.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, channel.getReplies(parentID, {\n                            id_lt: oldestMessageID,\n                            limit: limit,\n                        })];\n                case 2:\n                    queryResponse = _b.sent();\n                    threadHasMoreMessages = queryResponse.messages.length === limit;\n                    newThreadMessages = channel.state.threads[parentID] || [];\n                    // next set loadingMore to false so we can start asking for more data...\n                    loadMoreThreadFinished(threadHasMoreMessages, newThreadMessages);\n                    return [3 /*break*/, 4];\n                case 3:\n                    e_3 = _b.sent();\n                    loadMoreThreadFinished(false, oldMessages);\n                    return [3 /*break*/, 4];\n                case 4: return [2 /*return*/];\n            }\n        });\n    }); }, [channel, loadMoreThreadFinished, state.thread, state.threadLoadingMore]);\n    var closeThread = useCallback(function (event) {\n        if (event && event.preventDefault) {\n            event.preventDefault();\n        }\n        dispatch({ type: 'closeThread' });\n    }, []);\n    var onMentionsHoverOrClick = useMentionsHandlers(onMentionsHover, onMentionsClick);\n    var editMessage = useEditMessageHandler(doUpdateMessageRequest);\n    var typing = state.typing, restState = __rest(state, [\"typing\"]);\n    var channelStateContextValue = __assign(__assign({}, restState), { acceptedFiles: acceptedFiles, channel: channel, channelConfig: channelConfig, maxNumberOfFiles: maxNumberOfFiles, multipleUploads: multipleUploads, mutes: mutes, notifications: notifications, quotedMessage: quotedMessage, watcher_count: state.watcherCount });\n    var channelActionContextValue = {\n        addNotification: addNotification,\n        closeThread: closeThread,\n        dispatch: dispatch,\n        editMessage: editMessage,\n        loadMore: loadMore,\n        loadMoreThread: loadMoreThread,\n        onMentionsClick: onMentionsHoverOrClick,\n        onMentionsHover: onMentionsHoverOrClick,\n        openThread: openThread,\n        removeMessage: removeMessage,\n        retrySendMessage: retrySendMessage,\n        sendMessage: sendMessage,\n        setQuotedMessage: setQuotedMessage,\n        updateMessage: updateMessage,\n    };\n    var componentContextValue = useMemo(function () { return ({\n        Attachment: props.Attachment || DefaultAttachment,\n        AutocompleteSuggestionHeader: props.AutocompleteSuggestionHeader,\n        AutocompleteSuggestionItem: props.AutocompleteSuggestionItem,\n        AutocompleteSuggestionList: props.AutocompleteSuggestionList,\n        Avatar: props.Avatar,\n        CooldownTimer: props.CooldownTimer,\n        DateSeparator: props.DateSeparator,\n        EditMessageInput: props.EditMessageInput,\n        EmojiIcon: props.EmojiIcon,\n        EmptyStateIndicator: props.EmptyStateIndicator,\n        FileUploadIcon: props.FileUploadIcon,\n        GiphyPreviewMessage: props.GiphyPreviewMessage,\n        HeaderComponent: props.HeaderComponent,\n        Input: props.Input,\n        LoadingIndicator: props.LoadingIndicator,\n        Message: props.Message || MessageSimple,\n        MessageDeleted: props.MessageDeleted,\n        MessageListNotifications: props.MessageListNotifications,\n        MessageNotification: props.MessageNotification,\n        MessageOptions: props.MessageOptions,\n        MessageRepliesCountButton: props.MessageRepliesCountButton,\n        MessageStatus: props.MessageStatus,\n        MessageSystem: props.MessageSystem,\n        MessageTimestamp: props.MessageTimestamp,\n        PinIndicator: props.PinIndicator,\n        QuotedMessage: props.QuotedMessage,\n        QuotedMessagePreview: props.QuotedMessagePreview,\n        ReactionSelector: props.ReactionSelector,\n        ReactionsList: props.ReactionsList,\n        SendButton: props.SendButton,\n        ThreadHeader: props.ThreadHeader,\n        ThreadStart: props.ThreadStart,\n        TriggerProvider: props.TriggerProvider,\n        TypingIndicator: props.TypingIndicator,\n        VirtualMessage: props.VirtualMessage,\n    }); }, []);\n    var emojiContextValue = useMemo(function () { return ({\n        Emoji: props.Emoji,\n        emojiConfig: emojiConfig,\n        EmojiIndex: props.EmojiIndex,\n        EmojiPicker: props.EmojiPicker,\n    }); }, []);\n    var typingContextValue = {\n        typing: typing,\n    };\n    if (state.error) {\n        return (React.createElement(\"div\", { className: \"str-chat str-chat-channel \" + theme },\n            React.createElement(LoadingErrorIndicator, { error: state.error })));\n    }\n    if (state.loading) {\n        return (React.createElement(\"div\", { className: \"str-chat str-chat-channel \" + theme },\n            React.createElement(LoadingIndicator, { size: 25 })));\n    }\n    if (!(channel === null || channel === void 0 ? void 0 : channel.watch)) {\n        return (React.createElement(\"div\", { className: \"str-chat str-chat-channel \" + theme },\n            React.createElement(\"div\", null, t('Channel Missing'))));\n    }\n    return (React.createElement(\"div\", { className: \"str-chat str-chat-channel \" + theme + (useImageFlagEmojisOnWindows && navigator.platform.match(/Win/)\n            ? ' str-chat--windows-flags'\n            : '') },\n        React.createElement(ChannelStateProvider, { value: channelStateContextValue },\n            React.createElement(ChannelActionProvider, { value: channelActionContextValue },\n                React.createElement(ComponentProvider, { value: componentContextValue },\n                    React.createElement(EmojiProvider, { value: emojiContextValue },\n                        React.createElement(TypingProvider, { value: typingContextValue },\n                            React.createElement(\"div\", { className: 'str-chat__container' }, children))))))));\n};\n/**\n * A wrapper component that provides channel data and renders children.\n * The Channel component provides the following contexts:\n * - [ChannelStateContext](https://getstream.io/chat/docs/sdk/react/contexts/channel_state_context/)\n * - [ChannelActionContext](https://getstream.io/chat/docs/sdk/react/contexts/channel_action_context/)\n * - [ComponentContext](https://getstream.io/chat/docs/sdk/react/contexts/component_context/)\n * - [EmojiContext](https://getstream.io/chat/docs/sdk/react/contexts/emoji_context/)\n * - [TypingContext](https://getstream.io/chat/docs/sdk/react/contexts/typing_context/)\n */\nexport var Channel = React.memo(UnMemoizedChannel);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}