{"ast":null,"code":"import { useCallback, useEffect, useRef } from 'react';\nimport { logChatPromiseExecution } from 'stream-chat';\nimport { useChannelStateContext } from '../../../context/ChannelStateContext';\nexport var useMessageInputText = function (props, state, dispatch) {\n  var channel = useChannelStateContext().channel;\n  var additionalTextareaProps = props.additionalTextareaProps,\n    focus = props.focus,\n    parent = props.parent,\n    publishTypingEvent = props.publishTypingEvent;\n  var text = state.text;\n  var textareaRef = useRef();\n  // Focus\n  useEffect(function () {\n    if (focus && textareaRef.current) {\n      textareaRef.current.focus();\n    }\n  }, [focus]);\n  // Text + cursor position\n  var newCursorPosition = useRef();\n  var insertText = useCallback(function (textToInsert) {\n    var maxLength = (additionalTextareaProps || {}).maxLength;\n    if (!textareaRef.current) {\n      dispatch({\n        getNewText: function (text) {\n          var updatedText = text + textToInsert;\n          if (maxLength && updatedText.length > maxLength) {\n            return updatedText.slice(0, maxLength);\n          }\n          return updatedText;\n        },\n        type: 'setText'\n      });\n      return;\n    }\n    var _a = textareaRef.current,\n      selectionEnd = _a.selectionEnd,\n      selectionStart = _a.selectionStart;\n    newCursorPosition.current = selectionStart + textToInsert.length;\n    dispatch({\n      getNewText: function (prevText) {\n        var updatedText = prevText.slice(0, selectionStart) + textToInsert + prevText.slice(selectionEnd);\n        if (maxLength && updatedText.length > maxLength) {\n          return updatedText.slice(0, maxLength);\n        }\n        return updatedText;\n      },\n      type: 'setText'\n    });\n  }, [additionalTextareaProps, newCursorPosition, textareaRef]);\n  useEffect(function () {\n    var textareaElement = textareaRef.current;\n    if (textareaElement && newCursorPosition.current !== undefined) {\n      textareaElement.selectionStart = newCursorPosition.current;\n      textareaElement.selectionEnd = newCursorPosition.current;\n      newCursorPosition.current = undefined;\n    }\n  }, [text, newCursorPosition]);\n  var handleChange = useCallback(function (event) {\n    event.preventDefault();\n    if (!event || !event.target) {\n      return;\n    }\n    var newText = event.target.value;\n    dispatch({\n      getNewText: function () {\n        return newText;\n      },\n      type: 'setText'\n    });\n    if (publishTypingEvent && newText && channel) {\n      logChatPromiseExecution(channel.keystroke(parent === null || parent === void 0 ? void 0 : parent.id), 'start typing event');\n    }\n  }, [channel, parent, publishTypingEvent]);\n  return {\n    handleChange: handleChange,\n    insertText: insertText,\n    textareaRef: textareaRef\n  };\n};","map":{"version":3,"names":["useCallback","useEffect","useRef","logChatPromiseExecution","useChannelStateContext","useMessageInputText","props","state","dispatch","channel","additionalTextareaProps","focus","parent","publishTypingEvent","text","textareaRef","current","newCursorPosition","insertText","textToInsert","maxLength","getNewText","updatedText","length","slice","type","_a","selectionEnd","selectionStart","prevText","textareaElement","undefined","handleChange","event","preventDefault","target","newText","value","keystroke","id"],"sources":["C:/Users/alekh/Desktop/Medical-App/client/node_modules/stream-chat-react/dist/components/MessageInput/hooks/useMessageInputText.js"],"sourcesContent":["import { useCallback, useEffect, useRef } from 'react';\nimport { logChatPromiseExecution } from 'stream-chat';\nimport { useChannelStateContext } from '../../../context/ChannelStateContext';\nexport var useMessageInputText = function (props, state, dispatch) {\n    var channel = useChannelStateContext().channel;\n    var additionalTextareaProps = props.additionalTextareaProps, focus = props.focus, parent = props.parent, publishTypingEvent = props.publishTypingEvent;\n    var text = state.text;\n    var textareaRef = useRef();\n    // Focus\n    useEffect(function () {\n        if (focus && textareaRef.current) {\n            textareaRef.current.focus();\n        }\n    }, [focus]);\n    // Text + cursor position\n    var newCursorPosition = useRef();\n    var insertText = useCallback(function (textToInsert) {\n        var maxLength = (additionalTextareaProps || {}).maxLength;\n        if (!textareaRef.current) {\n            dispatch({\n                getNewText: function (text) {\n                    var updatedText = text + textToInsert;\n                    if (maxLength && updatedText.length > maxLength) {\n                        return updatedText.slice(0, maxLength);\n                    }\n                    return updatedText;\n                },\n                type: 'setText',\n            });\n            return;\n        }\n        var _a = textareaRef.current, selectionEnd = _a.selectionEnd, selectionStart = _a.selectionStart;\n        newCursorPosition.current = selectionStart + textToInsert.length;\n        dispatch({\n            getNewText: function (prevText) {\n                var updatedText = prevText.slice(0, selectionStart) + textToInsert + prevText.slice(selectionEnd);\n                if (maxLength && updatedText.length > maxLength) {\n                    return updatedText.slice(0, maxLength);\n                }\n                return updatedText;\n            },\n            type: 'setText',\n        });\n    }, [additionalTextareaProps, newCursorPosition, textareaRef]);\n    useEffect(function () {\n        var textareaElement = textareaRef.current;\n        if (textareaElement && newCursorPosition.current !== undefined) {\n            textareaElement.selectionStart = newCursorPosition.current;\n            textareaElement.selectionEnd = newCursorPosition.current;\n            newCursorPosition.current = undefined;\n        }\n    }, [text, newCursorPosition]);\n    var handleChange = useCallback(function (event) {\n        event.preventDefault();\n        if (!event || !event.target) {\n            return;\n        }\n        var newText = event.target.value;\n        dispatch({\n            getNewText: function () { return newText; },\n            type: 'setText',\n        });\n        if (publishTypingEvent && newText && channel) {\n            logChatPromiseExecution(channel.keystroke(parent === null || parent === void 0 ? void 0 : parent.id), 'start typing event');\n        }\n    }, [channel, parent, publishTypingEvent]);\n    return {\n        handleChange: handleChange,\n        insertText: insertText,\n        textareaRef: textareaRef,\n    };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}