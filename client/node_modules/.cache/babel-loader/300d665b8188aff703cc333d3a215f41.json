{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Textarea from 'react-textarea-autosize';\nimport getCaretCoordinates from 'textarea-caret';\nimport CustomEvent from 'custom-event';\nimport { isValidElementType } from 'react-is';\nimport Listeners, { KEY_CODES } from './listener';\nimport { List as DefaultSuggestionList } from './List';\nimport { DEFAULT_CARET_POSITION, defaultScrollToItem, errorMessage, triggerPropsCheck } from './utils';\nimport { CommandItem } from '../CommandItem/CommandItem';\nvar ReactTextareaAutocomplete = /** @class */function (_super) {\n  __extends(ReactTextareaAutocomplete, _super);\n  function ReactTextareaAutocomplete(props) {\n    var _this = _super.call(this, props) || this;\n    _this.getSelectionPosition = function () {\n      if (!_this.textareaRef) return null;\n      return {\n        selectionEnd: _this.textareaRef.selectionEnd,\n        selectionStart: _this.textareaRef.selectionStart\n      };\n    };\n    _this.getSelectedText = function () {\n      if (!_this.textareaRef) return null;\n      var _a = _this.textareaRef,\n        selectionEnd = _a.selectionEnd,\n        selectionStart = _a.selectionStart;\n      if (selectionStart === selectionEnd) return null;\n      return _this.state.value.substr(selectionStart, selectionEnd - selectionStart);\n    };\n    _this.setCaretPosition = function (position) {\n      if (position === void 0) {\n        position = 0;\n      }\n      if (!_this.textareaRef) return;\n      _this.textareaRef.focus();\n      _this.textareaRef.setSelectionRange(position, position);\n    };\n    _this.getCaretPosition = function () {\n      if (!_this.textareaRef) return 0;\n      return _this.textareaRef.selectionEnd;\n    };\n    _this.addKeycodeSubmitListeners = function (keyCodes) {\n      keyCodes.forEach(function (arrayOfCodes) {\n        var submitValue = arrayOfCodes;\n        if (submitValue.length === 1) {\n          submitValue = submitValue[0];\n        }\n        // does submitted keycodes include shift+Enter?\n        var shiftE = arrayOfCodes.every(function (code) {\n          return [16, 13].includes(code);\n        });\n        if (shiftE) _this.keycodeSubmitShiftE = true;\n        return Listeners.add(submitValue, function (e) {\n          return _this._onEnter(e);\n        });\n      });\n    };\n    _this._onEnter = function (event) {\n      if (!_this.textareaRef) return;\n      var trigger = _this.state.currentTrigger;\n      var hasFocus = _this.textareaRef.matches(':focus');\n      // Don't submit if the element doesn't have focus or the shift key is pressed, unless shift+Enter were provided as submit keys\n      if (!hasFocus || event.shiftKey === true && !_this.keycodeSubmitShiftE || event.shiftKey === true && !_this.props.keycodeSubmitKeys) {\n        return;\n      }\n      if (!trigger || !_this.state.data) {\n        // trigger a submit\n        _this._replaceWord();\n        if (_this.textareaRef) {\n          _this.textareaRef.selectionEnd = 0;\n        }\n        _this.props.handleSubmit(event);\n        _this._closeAutocomplete();\n      }\n    };\n    _this._onSpace = function () {\n      if (!_this.props.replaceWord || !_this.textareaRef) return;\n      // don't change characters if the element doesn't have focus\n      var hasFocus = _this.textareaRef.matches(':focus');\n      if (!hasFocus) return;\n      _this._replaceWord();\n    };\n    _this._replaceWord = function () {\n      var value = _this.state.value;\n      var lastWordRegex = /([^\\s]+)(\\s*)$/;\n      var match = lastWordRegex.exec(value.slice(0, _this.getCaretPosition()));\n      var lastWord = match && match[1];\n      if (!lastWord) return;\n      var spaces = match[2];\n      var newWord = _this.props.replaceWord(lastWord);\n      if (newWord == null) return;\n      var textBeforeWord = value.slice(0, _this.getCaretPosition() - match[0].length);\n      var textAfterCaret = value.slice(_this.getCaretPosition(), -1);\n      var newText = textBeforeWord + newWord + spaces + textAfterCaret;\n      _this.setState({\n        value: newText\n      }, function () {\n        // fire onChange event after successful selection\n        var e = new CustomEvent('change', {\n          bubbles: true\n        });\n        _this.textareaRef.dispatchEvent(e);\n        if (_this.props.onChange) _this.props.onChange(e);\n      });\n    };\n    _this._onSelect = function (newToken) {\n      var _a = _this.props,\n        closeCommandsList = _a.closeCommandsList,\n        onChange = _a.onChange,\n        showCommandsList = _a.showCommandsList;\n      var _b = _this.state,\n        stateTrigger = _b.currentTrigger,\n        selectionEnd = _b.selectionEnd,\n        textareaValue = _b.value;\n      var currentTrigger = showCommandsList ? '/' : stateTrigger;\n      if (!currentTrigger) return;\n      var computeCaretPosition = function (position, token, startToken) {\n        switch (position) {\n          case 'start':\n            return startToken;\n          case 'next':\n          case 'end':\n            return startToken + token.length;\n          default:\n            if (!Number.isInteger(position)) {\n              throw new Error('RTA: caretPosition should be \"start\", \"next\", \"end\" or number.');\n            }\n            return position;\n        }\n      };\n      var textToModify = showCommandsList ? '/' : textareaValue.slice(0, selectionEnd);\n      var startOfTokenPosition = textToModify.lastIndexOf(currentTrigger);\n      // we add space after emoji is selected if a caret position is next\n      var newTokenString = newToken.caretPosition === 'next' ? newToken.text + \" \" : newToken.text;\n      var newCaretPosition = computeCaretPosition(newToken.caretPosition, newTokenString, startOfTokenPosition);\n      var modifiedText = textToModify.substring(0, startOfTokenPosition) + newTokenString;\n      var valueToReplace = textareaValue.replace(textToModify, modifiedText);\n      // set the new textarea value and after that set the caret back to its position\n      _this.setState({\n        dataLoading: false,\n        value: valueToReplace\n      }, function () {\n        // fire onChange event after successful selection\n        var e = new CustomEvent('change', {\n          bubbles: true\n        });\n        _this.textareaRef.dispatchEvent(e);\n        if (onChange) onChange(e);\n        _this.setCaretPosition(newCaretPosition);\n      });\n      _this._closeAutocomplete();\n      closeCommandsList();\n    };\n    _this._getItemOnSelect = function (paramTrigger) {\n      var stateTrigger = _this.state.currentTrigger;\n      var triggerSettings = _this._getCurrentTriggerSettings(paramTrigger);\n      var currentTrigger = paramTrigger || stateTrigger;\n      if (!currentTrigger || !triggerSettings) return null;\n      var callback = triggerSettings.callback;\n      if (!callback) return null;\n      return function (item) {\n        if (typeof callback !== 'function') {\n          throw new Error('Output functor is not defined! You have to define \"output\" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type');\n        }\n        if (callback) {\n          return callback(item, currentTrigger);\n        }\n        return null;\n      };\n    };\n    _this._getTextToReplace = function (paramTrigger) {\n      var _a = _this.state,\n        actualToken = _a.actualToken,\n        stateTrigger = _a.currentTrigger;\n      var triggerSettings = _this._getCurrentTriggerSettings(paramTrigger);\n      var currentTrigger = paramTrigger || stateTrigger;\n      if (!currentTrigger || !triggerSettings) return null;\n      var output = triggerSettings.output;\n      return function (item) {\n        if (typeof item === 'object' && (!output || typeof output !== 'function')) {\n          throw new Error('Output functor is not defined! If you are using items as object you have to define \"output\" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type');\n        }\n        if (output) {\n          var textToReplace = output(item, currentTrigger);\n          if (!textToReplace || typeof textToReplace === 'number') {\n            throw new Error(\"Output functor should return string or object in shape {text: string, caretPosition: string | number}.\\nGot \\\"\" + String(textToReplace) + \"\\\". Check the implementation for trigger \\\"\" + currentTrigger + \"\\\" and its token \\\"\" + actualToken + \"\\\"\\n\\nSee https://github.com/webscopeio/react-textarea-autocomplete#trigger-type for more informations.\\n\");\n          }\n          if (typeof textToReplace === 'string') {\n            return {\n              caretPosition: DEFAULT_CARET_POSITION,\n              text: textToReplace\n            };\n          }\n          if (!textToReplace.text) {\n            throw new Error(\"Output \\\"text\\\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \\\"\" + currentTrigger + \"\\\" and its token \\\"\" + actualToken + \"\\\"\\n\");\n          }\n          if (!textToReplace.caretPosition) {\n            throw new Error(\"Output \\\"caretPosition\\\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \\\"\" + currentTrigger + \"\\\" and its token \\\"\" + actualToken + \"\\\"\\n\");\n          }\n          return textToReplace;\n        }\n        if (typeof item !== 'string') {\n          throw new Error('Output item should be string\\n');\n        }\n        return {\n          caretPosition: DEFAULT_CARET_POSITION,\n          text: \"\" + currentTrigger + item + currentTrigger\n        };\n      };\n    };\n    _this._getCurrentTriggerSettings = function (paramTrigger) {\n      var stateTrigger = _this.state.currentTrigger;\n      var currentTrigger = paramTrigger || stateTrigger;\n      if (!currentTrigger) return null;\n      return _this.props.trigger[currentTrigger];\n    };\n    _this._getValuesFromProvider = function () {\n      var _a = _this.state,\n        actualToken = _a.actualToken,\n        currentTrigger = _a.currentTrigger;\n      var triggerSettings = _this._getCurrentTriggerSettings();\n      if (!currentTrigger || !triggerSettings) return;\n      var component = triggerSettings.component,\n        dataProvider = triggerSettings.dataProvider;\n      if (typeof dataProvider !== 'function') {\n        throw new Error('Trigger provider has to be a function!');\n      }\n      _this.setState({\n        dataLoading: true\n      });\n      // Modified: send the full text to support / style commands\n      dataProvider(actualToken, _this.state.value, function (data, token) {\n        // Make sure that the result is still relevant for current query\n        if (token !== _this.state.actualToken) return;\n        if (!Array.isArray(data)) {\n          throw new Error('Trigger provider has to provide an array!');\n        }\n        if (!isValidElementType(component)) {\n          throw new Error('Component should be defined!');\n        }\n        // throw away if we resolved old trigger\n        if (currentTrigger !== _this.state.currentTrigger) return;\n        // if we haven't resolved any data let's close the autocomplete\n        if (!data.length) {\n          _this._closeAutocomplete();\n          return;\n        }\n        _this.setState({\n          component: component,\n          data: data,\n          dataLoading: false\n        });\n      });\n    };\n    _this._getSuggestions = function (paramTrigger) {\n      var _a = _this.state,\n        stateTrigger = _a.currentTrigger,\n        data = _a.data;\n      var currentTrigger = paramTrigger || stateTrigger;\n      if (!currentTrigger || !data || data && !data.length) return null;\n      return data;\n    };\n    _this._createRegExp = function () {\n      var trigger = _this.props.trigger;\n      // negative lookahead to match only the trigger + the actual token = \"bladhwd:adawd:word test\" => \":word\"\n      // https://stackoverflow.com/a/8057827/2719917\n      _this.tokenRegExp = new RegExp(\"([\" + Object.keys(trigger).join('') + \"])(?:(?!\\\\1)[^\\\\s])*$\");\n    };\n    /**\n     * Close autocomplete, also clean up trigger (to avoid slow promises)\n     */\n    _this._closeAutocomplete = function () {\n      _this.setState({\n        currentTrigger: null,\n        data: null,\n        dataLoading: false,\n        left: null,\n        top: null\n      });\n    };\n    _this._cleanUpProps = function () {\n      var props = __assign({}, _this.props);\n      var notSafe = ['additionalTextareaProps', 'className', 'closeCommandsList', 'closeOnClickOutside', 'containerClassName', 'containerStyle', 'disableMentions', 'dropdownClassName', 'dropdownStyle', 'grow', 'handleSubmit', 'innerRef', 'itemClassName', 'itemStyle', 'keycodeSubmitKeys', 'listClassName', 'listStyle', 'loaderClassName', 'loaderStyle', 'loadingComponent', 'minChar', 'movePopupAsYouType', 'onCaretPositionChange', 'onChange', 'ref', 'replaceWord', 'scrollToItem', 'showCommandsList', 'SuggestionItem', 'SuggestionList', 'trigger', 'value'];\n      // eslint-disable-next-line\n      for (var prop in props) {\n        if (notSafe.includes(prop)) delete props[prop];\n      }\n      return props;\n    };\n    _this._isCommand = function (text) {\n      if (text[0] !== '/') return false;\n      var tokens = text.split(' ');\n      if (tokens.length > 1) return false;\n      return true;\n    };\n    _this._changeHandler = function (e) {\n      var _a = _this.props,\n        minChar = _a.minChar,\n        movePopupAsYouType = _a.movePopupAsYouType,\n        onCaretPositionChange = _a.onCaretPositionChange,\n        onChange = _a.onChange,\n        trigger = _a.trigger;\n      var _b = _this.state,\n        left = _b.left,\n        top = _b.top;\n      var textarea = e.target;\n      var selectionEnd = textarea.selectionEnd,\n        selectionStart = textarea.selectionStart,\n        value = textarea.value;\n      if (onChange) {\n        e.persist();\n        onChange(e);\n      }\n      if (onCaretPositionChange) onCaretPositionChange(_this.getCaretPosition());\n      _this.setState({\n        value: value\n      });\n      var currentTrigger;\n      var lastToken;\n      if (_this._isCommand(value)) {\n        currentTrigger = '/';\n        lastToken = value;\n      } else {\n        var triggerTokens = Object.keys(trigger).join().replace('/', '');\n        var triggerNorWhitespace = \"[^\\\\s\" + triggerTokens + \"]*\";\n        var regex = new RegExp(\"(?!^|\\\\W)?[\" + triggerTokens + \"]\" + triggerNorWhitespace + \"\\\\s?\" + triggerNorWhitespace + \"$\", 'g');\n        var tokenMatch = value.slice(0, selectionEnd).match(regex);\n        lastToken = tokenMatch && tokenMatch[tokenMatch.length - 1].trim();\n        currentTrigger = lastToken && Object.keys(trigger).find(function (a) {\n          return a === lastToken[0];\n        }) || null;\n      }\n      /*\n       if we lost the trigger token or there is no following character we want to close\n       the autocomplete\n      */\n      if (!lastToken || lastToken.length <= minChar) {\n        _this._closeAutocomplete();\n        return;\n      }\n      var actualToken = lastToken.slice(1);\n      // if trigger is not configured step out from the function, otherwise proceed\n      if (!currentTrigger) return;\n      if (movePopupAsYouType || top === null && left === null ||\n      // if we have single char - trigger it means we want to re-position the autocomplete\n      lastToken.length === 1) {\n        var _c = getCaretCoordinates(textarea, selectionEnd),\n          newLeft = _c.left,\n          newTop = _c.top;\n        _this.setState({\n          // make position relative to textarea\n          left: newLeft,\n          top: newTop - _this.textareaRef.scrollTop || 0\n        });\n      }\n      _this.setState({\n        actualToken: actualToken,\n        currentTrigger: currentTrigger,\n        selectionEnd: selectionEnd,\n        selectionStart: selectionStart\n      }, function () {\n        try {\n          _this._getValuesFromProvider();\n        } catch (err) {\n          errorMessage(err.message);\n        }\n      });\n    };\n    _this._selectHandler = function (e) {\n      var _a = _this.props,\n        onCaretPositionChange = _a.onCaretPositionChange,\n        onSelect = _a.onSelect;\n      if (onCaretPositionChange) onCaretPositionChange(_this.getCaretPosition());\n      if (onSelect) {\n        e.persist();\n        onSelect(e);\n      }\n    };\n    // The textarea itself is outside the auto-select dropdown.\n    _this._onClickAndBlurHandler = function (e) {\n      var _a = _this.props,\n        closeOnClickOutside = _a.closeOnClickOutside,\n        onBlur = _a.onBlur;\n      // If this is a click: e.target is the textarea, and e.relatedTarget is the thing\n      // that was actually clicked. If we clicked inside the auto-select dropdown, then\n      // that's not a blur, from the auto-select point of view, so then do nothing.\n      var el = e.relatedTarget;\n      if (_this.dropdownRef && el instanceof Node && _this.dropdownRef.contains(el)) {\n        return;\n      }\n      if (closeOnClickOutside) _this._closeAutocomplete();\n      if (onBlur) {\n        e.persist();\n        onBlur(e);\n      }\n    };\n    _this._onScrollHandler = function () {\n      return _this._closeAutocomplete();\n    };\n    _this._dropdownScroll = function (item) {\n      var scrollToItem = _this.props.scrollToItem;\n      if (!scrollToItem) return;\n      if (scrollToItem === true) {\n        defaultScrollToItem(_this.dropdownRef, item);\n        return;\n      }\n      if (typeof scrollToItem !== 'function' || scrollToItem.length !== 2) {\n        throw new Error('`scrollToItem` has to be boolean (true for default implementation) or function with two parameters: container, item.');\n      }\n      scrollToItem(_this.dropdownRef, item);\n    };\n    _this.getTriggerProps = function () {\n      var _a = _this.props,\n        showCommandsList = _a.showCommandsList,\n        trigger = _a.trigger;\n      var _b = _this.state,\n        component = _b.component,\n        currentTrigger = _b.currentTrigger,\n        selectionEnd = _b.selectionEnd,\n        value = _b.value;\n      var selectedItem = _this._getItemOnSelect();\n      var suggestionData = _this._getSuggestions();\n      var textToReplace = _this._getTextToReplace();\n      var triggerProps = {\n        component: component,\n        currentTrigger: currentTrigger,\n        getSelectedItem: selectedItem,\n        getTextToReplace: textToReplace,\n        selectionEnd: selectionEnd,\n        value: value,\n        values: suggestionData\n      };\n      if (showCommandsList && trigger['/']) {\n        var currentCommands_1;\n        var getCommands = trigger['/'].dataProvider;\n        getCommands === null || getCommands === void 0 ? void 0 : getCommands('', '/', function (data) {\n          currentCommands_1 = data;\n        });\n        triggerProps.component = CommandItem;\n        triggerProps.currentTrigger = '/';\n        triggerProps.getTextToReplace = _this._getTextToReplace('/');\n        triggerProps.getSelectedItem = _this._getItemOnSelect('/');\n        triggerProps.selectionEnd = 1;\n        triggerProps.value = '/';\n        triggerProps.values = currentCommands_1;\n      }\n      return triggerProps;\n    };\n    var _a = _this.props,\n      loadingComponent = _a.loadingComponent,\n      trigger = _a.trigger,\n      value = _a.value;\n    // TODO: it would be better to have the parent control state...\n    // if (value) this.state.value = value;\n    _this._createRegExp();\n    if (!loadingComponent) {\n      throw new Error('RTA: loadingComponent is not defined');\n    }\n    if (!trigger) {\n      throw new Error('RTA: trigger is not defined');\n    }\n    _this.state = {\n      actualToken: '',\n      component: null,\n      currentTrigger: null,\n      data: null,\n      dataLoading: false,\n      keycodeSubmitShiftE: false,\n      left: null,\n      listenerIndex: {},\n      selectionEnd: 0,\n      selectionStart: 0,\n      top: null,\n      value: value || ''\n    };\n    return _this;\n  }\n  ReactTextareaAutocomplete.prototype.componentDidMount = function () {\n    var _this = this;\n    Listeners.add(KEY_CODES.ESC, function () {\n      return _this._closeAutocomplete();\n    });\n    Listeners.add(KEY_CODES.SPACE, function () {\n      return _this._onSpace();\n    });\n    var listenerIndex = {};\n    var newSubmitKeys = this.props.keycodeSubmitKeys;\n    if (newSubmitKeys) {\n      var keycodeIndex = this.addKeycodeSubmitListeners(newSubmitKeys);\n      listenerIndex[keycodeIndex] = keycodeIndex;\n    } else {\n      var enterIndex = Listeners.add(KEY_CODES.ENTER, function (e) {\n        return _this._onEnter(e);\n      });\n      listenerIndex[enterIndex] = enterIndex;\n    }\n    this.setState({\n      listenerIndex: listenerIndex\n    });\n    Listeners.startListen();\n  };\n  ReactTextareaAutocomplete.prototype.UNSAFE_componentWillReceiveProps = function (nextProps) {\n    this._update(nextProps);\n  };\n  ReactTextareaAutocomplete.prototype.componentWillUnmount = function () {\n    Listeners.stopListen();\n    Listeners.remove(this.state.listenerIndex);\n  };\n  // TODO: This is an anti pattern in react, should come up with a better way\n  ReactTextareaAutocomplete.prototype._update = function (_a) {\n    var trigger = _a.trigger,\n      value = _a.value;\n    var oldValue = this.state.value;\n    var oldTrigger = this.props.trigger;\n    if (value !== oldValue || !oldValue) this.setState({\n      value: value\n    });\n    /**\n     * check if trigger chars are changed, if so, change the regexp accordingly\n     */\n    if (Object.keys(trigger).join('') !== Object.keys(oldTrigger).join('')) {\n      this._createRegExp();\n    }\n  };\n  ReactTextareaAutocomplete.prototype.renderSuggestionListContainer = function () {\n    var _this = this;\n    var _a = this.props,\n      disableMentions = _a.disableMentions,\n      dropdownClassName = _a.dropdownClassName,\n      dropdownStyle = _a.dropdownStyle,\n      itemClassName = _a.itemClassName,\n      itemStyle = _a.itemStyle,\n      listClassName = _a.listClassName,\n      SuggestionItem = _a.SuggestionItem,\n      _b = _a.SuggestionList,\n      SuggestionList = _b === void 0 ? DefaultSuggestionList : _b;\n    var triggerProps = this.getTriggerProps();\n    if (triggerProps.values && triggerProps.currentTrigger && !(disableMentions && triggerProps.currentTrigger === '@')) {\n      return React.createElement(\"div\", {\n        className: \"rta__autocomplete \" + (dropdownClassName || ''),\n        ref: function (ref) {\n          _this.dropdownRef = ref;\n        },\n        style: dropdownStyle\n      }, React.createElement(SuggestionList, __assign({\n        className: listClassName,\n        dropdownScroll: this._dropdownScroll,\n        itemClassName: itemClassName,\n        itemStyle: itemStyle,\n        onSelect: this._onSelect,\n        SuggestionItem: SuggestionItem\n      }, triggerProps)));\n    }\n    return null;\n  };\n  ReactTextareaAutocomplete.prototype.render = function () {\n    var _this = this;\n    var _a = this.props,\n      className = _a.className,\n      containerClassName = _a.containerClassName,\n      containerStyle = _a.containerStyle,\n      style = _a.style;\n    var maxRows = this.props.maxRows;\n    var _b = this.state,\n      dataLoading = _b.dataLoading,\n      value = _b.value;\n    if (!this.props.grow) maxRows = 1;\n    return React.createElement(\"div\", {\n      className: \"rta \" + (dataLoading === true ? 'rta--loading' : '') + \" \" + (containerClassName || ''),\n      style: containerStyle\n    }, this.renderSuggestionListContainer(), React.createElement(Textarea, __assign({}, this._cleanUpProps(), {\n      className: \"rta__textarea \" + (className || ''),\n      maxRows: maxRows,\n      onBlur: this._onClickAndBlurHandler,\n      onChange: this._changeHandler,\n      onClick: this._onClickAndBlurHandler,\n      onFocus: this.props.onFocus,\n      onScroll: this._onScrollHandler,\n      onSelect: this._selectHandler,\n      ref: function (ref) {\n        if (_this.props.innerRef) _this.props.innerRef(ref);\n        _this.textareaRef = ref;\n      },\n      style: style,\n      value: value\n    }, this.props.additionalTextareaProps)));\n  };\n  ReactTextareaAutocomplete.defaultProps = {\n    closeOnClickOutside: true,\n    maxRows: 10,\n    minChar: 1,\n    movePopupAsYouType: false,\n    scrollToItem: true,\n    value: ''\n  };\n  return ReactTextareaAutocomplete;\n}(React.Component);\nexport { ReactTextareaAutocomplete };\nReactTextareaAutocomplete.propTypes = {\n  className: PropTypes.string,\n  closeOnClickOutside: PropTypes.bool,\n  containerClassName: PropTypes.string,\n  containerStyle: PropTypes.object,\n  disableMentions: PropTypes.bool,\n  dropdownClassName: PropTypes.string,\n  dropdownStyle: PropTypes.object,\n  itemClassName: PropTypes.string,\n  itemStyle: PropTypes.object,\n  keycodeSubmitKeys: PropTypes.array,\n  listClassName: PropTypes.string,\n  listStyle: PropTypes.object,\n  loaderClassName: PropTypes.string,\n  loaderStyle: PropTypes.object,\n  loadingComponent: PropTypes.elementType,\n  minChar: PropTypes.number,\n  onBlur: PropTypes.func,\n  onCaretPositionChange: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  style: PropTypes.object,\n  SuggestionList: PropTypes.elementType,\n  trigger: triggerPropsCheck,\n  value: PropTypes.string\n};","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","React","PropTypes","Textarea","getCaretCoordinates","CustomEvent","isValidElementType","Listeners","KEY_CODES","List","DefaultSuggestionList","DEFAULT_CARET_POSITION","defaultScrollToItem","errorMessage","triggerPropsCheck","CommandItem","ReactTextareaAutocomplete","_super","props","_this","getSelectionPosition","textareaRef","selectionEnd","selectionStart","getSelectedText","_a","state","value","substr","setCaretPosition","position","focus","setSelectionRange","getCaretPosition","addKeycodeSubmitListeners","keyCodes","forEach","arrayOfCodes","submitValue","shiftE","every","code","includes","keycodeSubmitShiftE","add","e","_onEnter","event","trigger","currentTrigger","hasFocus","matches","shiftKey","keycodeSubmitKeys","data","_replaceWord","handleSubmit","_closeAutocomplete","_onSpace","replaceWord","lastWordRegex","match","exec","slice","lastWord","spaces","newWord","textBeforeWord","textAfterCaret","newText","setState","bubbles","dispatchEvent","onChange","_onSelect","newToken","closeCommandsList","showCommandsList","_b","stateTrigger","textareaValue","computeCaretPosition","token","startToken","Number","isInteger","Error","textToModify","startOfTokenPosition","lastIndexOf","newTokenString","caretPosition","text","newCaretPosition","modifiedText","substring","valueToReplace","replace","dataLoading","_getItemOnSelect","paramTrigger","triggerSettings","_getCurrentTriggerSettings","callback","item","_getTextToReplace","actualToken","output","textToReplace","_getValuesFromProvider","component","dataProvider","isArray","_getSuggestions","_createRegExp","tokenRegExp","RegExp","keys","join","left","top","_cleanUpProps","notSafe","prop","_isCommand","tokens","split","_changeHandler","minChar","movePopupAsYouType","onCaretPositionChange","textarea","target","persist","lastToken","triggerTokens","triggerNorWhitespace","regex","tokenMatch","trim","find","a","_c","newLeft","newTop","scrollTop","err","message","_selectHandler","onSelect","_onClickAndBlurHandler","closeOnClickOutside","onBlur","el","relatedTarget","dropdownRef","Node","contains","_onScrollHandler","_dropdownScroll","scrollToItem","getTriggerProps","selectedItem","suggestionData","triggerProps","getSelectedItem","getTextToReplace","values","currentCommands_1","getCommands","loadingComponent","listenerIndex","componentDidMount","ESC","SPACE","newSubmitKeys","keycodeIndex","enterIndex","ENTER","startListen","UNSAFE_componentWillReceiveProps","nextProps","_update","componentWillUnmount","stopListen","remove","oldValue","oldTrigger","renderSuggestionListContainer","disableMentions","dropdownClassName","dropdownStyle","itemClassName","itemStyle","listClassName","SuggestionItem","SuggestionList","createElement","className","ref","style","dropdownScroll","render","containerClassName","containerStyle","maxRows","grow","onClick","onFocus","onScroll","innerRef","additionalTextareaProps","defaultProps","Component","propTypes","string","bool","object","array","listStyle","loaderClassName","loaderStyle","elementType","number","func"],"sources":["C:/Users/alekh/Desktop/Medical-App/client/node_modules/stream-chat-react/dist/components/AutoCompleteTextarea/Textarea.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Textarea from 'react-textarea-autosize';\nimport getCaretCoordinates from 'textarea-caret';\nimport CustomEvent from 'custom-event';\nimport { isValidElementType } from 'react-is';\nimport Listeners, { KEY_CODES } from './listener';\nimport { List as DefaultSuggestionList } from './List';\nimport { DEFAULT_CARET_POSITION, defaultScrollToItem, errorMessage, triggerPropsCheck, } from './utils';\nimport { CommandItem } from '../CommandItem/CommandItem';\nvar ReactTextareaAutocomplete = /** @class */ (function (_super) {\n    __extends(ReactTextareaAutocomplete, _super);\n    function ReactTextareaAutocomplete(props) {\n        var _this = _super.call(this, props) || this;\n        _this.getSelectionPosition = function () {\n            if (!_this.textareaRef)\n                return null;\n            return {\n                selectionEnd: _this.textareaRef.selectionEnd,\n                selectionStart: _this.textareaRef.selectionStart,\n            };\n        };\n        _this.getSelectedText = function () {\n            if (!_this.textareaRef)\n                return null;\n            var _a = _this.textareaRef, selectionEnd = _a.selectionEnd, selectionStart = _a.selectionStart;\n            if (selectionStart === selectionEnd)\n                return null;\n            return _this.state.value.substr(selectionStart, selectionEnd - selectionStart);\n        };\n        _this.setCaretPosition = function (position) {\n            if (position === void 0) { position = 0; }\n            if (!_this.textareaRef)\n                return;\n            _this.textareaRef.focus();\n            _this.textareaRef.setSelectionRange(position, position);\n        };\n        _this.getCaretPosition = function () {\n            if (!_this.textareaRef)\n                return 0;\n            return _this.textareaRef.selectionEnd;\n        };\n        _this.addKeycodeSubmitListeners = function (keyCodes) {\n            keyCodes.forEach(function (arrayOfCodes) {\n                var submitValue = arrayOfCodes;\n                if (submitValue.length === 1) {\n                    submitValue = submitValue[0];\n                }\n                // does submitted keycodes include shift+Enter?\n                var shiftE = arrayOfCodes.every(function (code) { return [16, 13].includes(code); });\n                if (shiftE)\n                    _this.keycodeSubmitShiftE = true;\n                return Listeners.add(submitValue, function (e) { return _this._onEnter(e); });\n            });\n        };\n        _this._onEnter = function (event) {\n            if (!_this.textareaRef)\n                return;\n            var trigger = _this.state.currentTrigger;\n            var hasFocus = _this.textareaRef.matches(':focus');\n            // Don't submit if the element doesn't have focus or the shift key is pressed, unless shift+Enter were provided as submit keys\n            if (!hasFocus ||\n                (event.shiftKey === true && !_this.keycodeSubmitShiftE) ||\n                (event.shiftKey === true && !_this.props.keycodeSubmitKeys)) {\n                return;\n            }\n            if (!trigger || !_this.state.data) {\n                // trigger a submit\n                _this._replaceWord();\n                if (_this.textareaRef) {\n                    _this.textareaRef.selectionEnd = 0;\n                }\n                _this.props.handleSubmit(event);\n                _this._closeAutocomplete();\n            }\n        };\n        _this._onSpace = function () {\n            if (!_this.props.replaceWord || !_this.textareaRef)\n                return;\n            // don't change characters if the element doesn't have focus\n            var hasFocus = _this.textareaRef.matches(':focus');\n            if (!hasFocus)\n                return;\n            _this._replaceWord();\n        };\n        _this._replaceWord = function () {\n            var value = _this.state.value;\n            var lastWordRegex = /([^\\s]+)(\\s*)$/;\n            var match = lastWordRegex.exec(value.slice(0, _this.getCaretPosition()));\n            var lastWord = match && match[1];\n            if (!lastWord)\n                return;\n            var spaces = match[2];\n            var newWord = _this.props.replaceWord(lastWord);\n            if (newWord == null)\n                return;\n            var textBeforeWord = value.slice(0, _this.getCaretPosition() - match[0].length);\n            var textAfterCaret = value.slice(_this.getCaretPosition(), -1);\n            var newText = textBeforeWord + newWord + spaces + textAfterCaret;\n            _this.setState({\n                value: newText,\n            }, function () {\n                // fire onChange event after successful selection\n                var e = new CustomEvent('change', { bubbles: true });\n                _this.textareaRef.dispatchEvent(e);\n                if (_this.props.onChange)\n                    _this.props.onChange(e);\n            });\n        };\n        _this._onSelect = function (newToken) {\n            var _a = _this.props, closeCommandsList = _a.closeCommandsList, onChange = _a.onChange, showCommandsList = _a.showCommandsList;\n            var _b = _this.state, stateTrigger = _b.currentTrigger, selectionEnd = _b.selectionEnd, textareaValue = _b.value;\n            var currentTrigger = showCommandsList ? '/' : stateTrigger;\n            if (!currentTrigger)\n                return;\n            var computeCaretPosition = function (position, token, startToken) {\n                switch (position) {\n                    case 'start':\n                        return startToken;\n                    case 'next':\n                    case 'end':\n                        return startToken + token.length;\n                    default:\n                        if (!Number.isInteger(position)) {\n                            throw new Error('RTA: caretPosition should be \"start\", \"next\", \"end\" or number.');\n                        }\n                        return position;\n                }\n            };\n            var textToModify = showCommandsList ? '/' : textareaValue.slice(0, selectionEnd);\n            var startOfTokenPosition = textToModify.lastIndexOf(currentTrigger);\n            // we add space after emoji is selected if a caret position is next\n            var newTokenString = newToken.caretPosition === 'next' ? newToken.text + \" \" : newToken.text;\n            var newCaretPosition = computeCaretPosition(newToken.caretPosition, newTokenString, startOfTokenPosition);\n            var modifiedText = textToModify.substring(0, startOfTokenPosition) + newTokenString;\n            var valueToReplace = textareaValue.replace(textToModify, modifiedText);\n            // set the new textarea value and after that set the caret back to its position\n            _this.setState({\n                dataLoading: false,\n                value: valueToReplace,\n            }, function () {\n                // fire onChange event after successful selection\n                var e = new CustomEvent('change', { bubbles: true });\n                _this.textareaRef.dispatchEvent(e);\n                if (onChange)\n                    onChange(e);\n                _this.setCaretPosition(newCaretPosition);\n            });\n            _this._closeAutocomplete();\n            closeCommandsList();\n        };\n        _this._getItemOnSelect = function (paramTrigger) {\n            var stateTrigger = _this.state.currentTrigger;\n            var triggerSettings = _this._getCurrentTriggerSettings(paramTrigger);\n            var currentTrigger = paramTrigger || stateTrigger;\n            if (!currentTrigger || !triggerSettings)\n                return null;\n            var callback = triggerSettings.callback;\n            if (!callback)\n                return null;\n            return function (item) {\n                if (typeof callback !== 'function') {\n                    throw new Error('Output functor is not defined! You have to define \"output\" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type');\n                }\n                if (callback) {\n                    return callback(item, currentTrigger);\n                }\n                return null;\n            };\n        };\n        _this._getTextToReplace = function (paramTrigger) {\n            var _a = _this.state, actualToken = _a.actualToken, stateTrigger = _a.currentTrigger;\n            var triggerSettings = _this._getCurrentTriggerSettings(paramTrigger);\n            var currentTrigger = paramTrigger || stateTrigger;\n            if (!currentTrigger || !triggerSettings)\n                return null;\n            var output = triggerSettings.output;\n            return function (item) {\n                if (typeof item === 'object' && (!output || typeof output !== 'function')) {\n                    throw new Error('Output functor is not defined! If you are using items as object you have to define \"output\" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type');\n                }\n                if (output) {\n                    var textToReplace = output(item, currentTrigger);\n                    if (!textToReplace || typeof textToReplace === 'number') {\n                        throw new Error(\"Output functor should return string or object in shape {text: string, caretPosition: string | number}.\\nGot \\\"\" + String(textToReplace) + \"\\\". Check the implementation for trigger \\\"\" + currentTrigger + \"\\\" and its token \\\"\" + actualToken + \"\\\"\\n\\nSee https://github.com/webscopeio/react-textarea-autocomplete#trigger-type for more informations.\\n\");\n                    }\n                    if (typeof textToReplace === 'string') {\n                        return {\n                            caretPosition: DEFAULT_CARET_POSITION,\n                            text: textToReplace,\n                        };\n                    }\n                    if (!textToReplace.text) {\n                        throw new Error(\"Output \\\"text\\\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \\\"\" + currentTrigger + \"\\\" and its token \\\"\" + actualToken + \"\\\"\\n\");\n                    }\n                    if (!textToReplace.caretPosition) {\n                        throw new Error(\"Output \\\"caretPosition\\\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \\\"\" + currentTrigger + \"\\\" and its token \\\"\" + actualToken + \"\\\"\\n\");\n                    }\n                    return textToReplace;\n                }\n                if (typeof item !== 'string') {\n                    throw new Error('Output item should be string\\n');\n                }\n                return {\n                    caretPosition: DEFAULT_CARET_POSITION,\n                    text: \"\" + currentTrigger + item + currentTrigger,\n                };\n            };\n        };\n        _this._getCurrentTriggerSettings = function (paramTrigger) {\n            var stateTrigger = _this.state.currentTrigger;\n            var currentTrigger = paramTrigger || stateTrigger;\n            if (!currentTrigger)\n                return null;\n            return _this.props.trigger[currentTrigger];\n        };\n        _this._getValuesFromProvider = function () {\n            var _a = _this.state, actualToken = _a.actualToken, currentTrigger = _a.currentTrigger;\n            var triggerSettings = _this._getCurrentTriggerSettings();\n            if (!currentTrigger || !triggerSettings)\n                return;\n            var component = triggerSettings.component, dataProvider = triggerSettings.dataProvider;\n            if (typeof dataProvider !== 'function') {\n                throw new Error('Trigger provider has to be a function!');\n            }\n            _this.setState({ dataLoading: true });\n            // Modified: send the full text to support / style commands\n            dataProvider(actualToken, _this.state.value, function (data, token) {\n                // Make sure that the result is still relevant for current query\n                if (token !== _this.state.actualToken)\n                    return;\n                if (!Array.isArray(data)) {\n                    throw new Error('Trigger provider has to provide an array!');\n                }\n                if (!isValidElementType(component)) {\n                    throw new Error('Component should be defined!');\n                }\n                // throw away if we resolved old trigger\n                if (currentTrigger !== _this.state.currentTrigger)\n                    return;\n                // if we haven't resolved any data let's close the autocomplete\n                if (!data.length) {\n                    _this._closeAutocomplete();\n                    return;\n                }\n                _this.setState({\n                    component: component,\n                    data: data,\n                    dataLoading: false,\n                });\n            });\n        };\n        _this._getSuggestions = function (paramTrigger) {\n            var _a = _this.state, stateTrigger = _a.currentTrigger, data = _a.data;\n            var currentTrigger = paramTrigger || stateTrigger;\n            if (!currentTrigger || !data || (data && !data.length))\n                return null;\n            return data;\n        };\n        _this._createRegExp = function () {\n            var trigger = _this.props.trigger;\n            // negative lookahead to match only the trigger + the actual token = \"bladhwd:adawd:word test\" => \":word\"\n            // https://stackoverflow.com/a/8057827/2719917\n            _this.tokenRegExp = new RegExp(\"([\" + Object.keys(trigger).join('') + \"])(?:(?!\\\\1)[^\\\\s])*$\");\n        };\n        /**\n         * Close autocomplete, also clean up trigger (to avoid slow promises)\n         */\n        _this._closeAutocomplete = function () {\n            _this.setState({\n                currentTrigger: null,\n                data: null,\n                dataLoading: false,\n                left: null,\n                top: null,\n            });\n        };\n        _this._cleanUpProps = function () {\n            var props = __assign({}, _this.props);\n            var notSafe = [\n                'additionalTextareaProps',\n                'className',\n                'closeCommandsList',\n                'closeOnClickOutside',\n                'containerClassName',\n                'containerStyle',\n                'disableMentions',\n                'dropdownClassName',\n                'dropdownStyle',\n                'grow',\n                'handleSubmit',\n                'innerRef',\n                'itemClassName',\n                'itemStyle',\n                'keycodeSubmitKeys',\n                'listClassName',\n                'listStyle',\n                'loaderClassName',\n                'loaderStyle',\n                'loadingComponent',\n                'minChar',\n                'movePopupAsYouType',\n                'onCaretPositionChange',\n                'onChange',\n                'ref',\n                'replaceWord',\n                'scrollToItem',\n                'showCommandsList',\n                'SuggestionItem',\n                'SuggestionList',\n                'trigger',\n                'value',\n            ];\n            // eslint-disable-next-line\n            for (var prop in props) {\n                if (notSafe.includes(prop))\n                    delete props[prop];\n            }\n            return props;\n        };\n        _this._isCommand = function (text) {\n            if (text[0] !== '/')\n                return false;\n            var tokens = text.split(' ');\n            if (tokens.length > 1)\n                return false;\n            return true;\n        };\n        _this._changeHandler = function (e) {\n            var _a = _this.props, minChar = _a.minChar, movePopupAsYouType = _a.movePopupAsYouType, onCaretPositionChange = _a.onCaretPositionChange, onChange = _a.onChange, trigger = _a.trigger;\n            var _b = _this.state, left = _b.left, top = _b.top;\n            var textarea = e.target;\n            var selectionEnd = textarea.selectionEnd, selectionStart = textarea.selectionStart, value = textarea.value;\n            if (onChange) {\n                e.persist();\n                onChange(e);\n            }\n            if (onCaretPositionChange)\n                onCaretPositionChange(_this.getCaretPosition());\n            _this.setState({ value: value });\n            var currentTrigger;\n            var lastToken;\n            if (_this._isCommand(value)) {\n                currentTrigger = '/';\n                lastToken = value;\n            }\n            else {\n                var triggerTokens = Object.keys(trigger).join().replace('/', '');\n                var triggerNorWhitespace = \"[^\\\\s\" + triggerTokens + \"]*\";\n                var regex = new RegExp(\"(?!^|\\\\W)?[\" + triggerTokens + \"]\" + triggerNorWhitespace + \"\\\\s?\" + triggerNorWhitespace + \"$\", 'g');\n                var tokenMatch = value.slice(0, selectionEnd).match(regex);\n                lastToken = tokenMatch && tokenMatch[tokenMatch.length - 1].trim();\n                currentTrigger = (lastToken && Object.keys(trigger).find(function (a) { return a === lastToken[0]; })) || null;\n            }\n            /*\n             if we lost the trigger token or there is no following character we want to close\n             the autocomplete\n            */\n            if (!lastToken || lastToken.length <= minChar) {\n                _this._closeAutocomplete();\n                return;\n            }\n            var actualToken = lastToken.slice(1);\n            // if trigger is not configured step out from the function, otherwise proceed\n            if (!currentTrigger)\n                return;\n            if (movePopupAsYouType ||\n                (top === null && left === null) ||\n                // if we have single char - trigger it means we want to re-position the autocomplete\n                lastToken.length === 1) {\n                var _c = getCaretCoordinates(textarea, selectionEnd), newLeft = _c.left, newTop = _c.top;\n                _this.setState({\n                    // make position relative to textarea\n                    left: newLeft,\n                    top: newTop - _this.textareaRef.scrollTop || 0,\n                });\n            }\n            _this.setState({\n                actualToken: actualToken,\n                currentTrigger: currentTrigger,\n                selectionEnd: selectionEnd,\n                selectionStart: selectionStart,\n            }, function () {\n                try {\n                    _this._getValuesFromProvider();\n                }\n                catch (err) {\n                    errorMessage(err.message);\n                }\n            });\n        };\n        _this._selectHandler = function (e) {\n            var _a = _this.props, onCaretPositionChange = _a.onCaretPositionChange, onSelect = _a.onSelect;\n            if (onCaretPositionChange)\n                onCaretPositionChange(_this.getCaretPosition());\n            if (onSelect) {\n                e.persist();\n                onSelect(e);\n            }\n        };\n        // The textarea itself is outside the auto-select dropdown.\n        _this._onClickAndBlurHandler = function (e) {\n            var _a = _this.props, closeOnClickOutside = _a.closeOnClickOutside, onBlur = _a.onBlur;\n            // If this is a click: e.target is the textarea, and e.relatedTarget is the thing\n            // that was actually clicked. If we clicked inside the auto-select dropdown, then\n            // that's not a blur, from the auto-select point of view, so then do nothing.\n            var el = e.relatedTarget;\n            if (_this.dropdownRef && el instanceof Node && _this.dropdownRef.contains(el)) {\n                return;\n            }\n            if (closeOnClickOutside)\n                _this._closeAutocomplete();\n            if (onBlur) {\n                e.persist();\n                onBlur(e);\n            }\n        };\n        _this._onScrollHandler = function () { return _this._closeAutocomplete(); };\n        _this._dropdownScroll = function (item) {\n            var scrollToItem = _this.props.scrollToItem;\n            if (!scrollToItem)\n                return;\n            if (scrollToItem === true) {\n                defaultScrollToItem(_this.dropdownRef, item);\n                return;\n            }\n            if (typeof scrollToItem !== 'function' || scrollToItem.length !== 2) {\n                throw new Error('`scrollToItem` has to be boolean (true for default implementation) or function with two parameters: container, item.');\n            }\n            scrollToItem(_this.dropdownRef, item);\n        };\n        _this.getTriggerProps = function () {\n            var _a = _this.props, showCommandsList = _a.showCommandsList, trigger = _a.trigger;\n            var _b = _this.state, component = _b.component, currentTrigger = _b.currentTrigger, selectionEnd = _b.selectionEnd, value = _b.value;\n            var selectedItem = _this._getItemOnSelect();\n            var suggestionData = _this._getSuggestions();\n            var textToReplace = _this._getTextToReplace();\n            var triggerProps = {\n                component: component,\n                currentTrigger: currentTrigger,\n                getSelectedItem: selectedItem,\n                getTextToReplace: textToReplace,\n                selectionEnd: selectionEnd,\n                value: value,\n                values: suggestionData,\n            };\n            if (showCommandsList && trigger['/']) {\n                var currentCommands_1;\n                var getCommands = trigger['/'].dataProvider;\n                getCommands === null || getCommands === void 0 ? void 0 : getCommands('', '/', function (data) {\n                    currentCommands_1 = data;\n                });\n                triggerProps.component = CommandItem;\n                triggerProps.currentTrigger = '/';\n                triggerProps.getTextToReplace = _this._getTextToReplace('/');\n                triggerProps.getSelectedItem = _this._getItemOnSelect('/');\n                triggerProps.selectionEnd = 1;\n                triggerProps.value = '/';\n                triggerProps.values = currentCommands_1;\n            }\n            return triggerProps;\n        };\n        var _a = _this.props, loadingComponent = _a.loadingComponent, trigger = _a.trigger, value = _a.value;\n        // TODO: it would be better to have the parent control state...\n        // if (value) this.state.value = value;\n        _this._createRegExp();\n        if (!loadingComponent) {\n            throw new Error('RTA: loadingComponent is not defined');\n        }\n        if (!trigger) {\n            throw new Error('RTA: trigger is not defined');\n        }\n        _this.state = {\n            actualToken: '',\n            component: null,\n            currentTrigger: null,\n            data: null,\n            dataLoading: false,\n            keycodeSubmitShiftE: false,\n            left: null,\n            listenerIndex: {},\n            selectionEnd: 0,\n            selectionStart: 0,\n            top: null,\n            value: value || '',\n        };\n        return _this;\n    }\n    ReactTextareaAutocomplete.prototype.componentDidMount = function () {\n        var _this = this;\n        Listeners.add(KEY_CODES.ESC, function () { return _this._closeAutocomplete(); });\n        Listeners.add(KEY_CODES.SPACE, function () { return _this._onSpace(); });\n        var listenerIndex = {};\n        var newSubmitKeys = this.props.keycodeSubmitKeys;\n        if (newSubmitKeys) {\n            var keycodeIndex = this.addKeycodeSubmitListeners(newSubmitKeys);\n            listenerIndex[keycodeIndex] = keycodeIndex;\n        }\n        else {\n            var enterIndex = Listeners.add(KEY_CODES.ENTER, function (e) { return _this._onEnter(e); });\n            listenerIndex[enterIndex] = enterIndex;\n        }\n        this.setState({\n            listenerIndex: listenerIndex,\n        });\n        Listeners.startListen();\n    };\n    ReactTextareaAutocomplete.prototype.UNSAFE_componentWillReceiveProps = function (nextProps) {\n        this._update(nextProps);\n    };\n    ReactTextareaAutocomplete.prototype.componentWillUnmount = function () {\n        Listeners.stopListen();\n        Listeners.remove(this.state.listenerIndex);\n    };\n    // TODO: This is an anti pattern in react, should come up with a better way\n    ReactTextareaAutocomplete.prototype._update = function (_a) {\n        var trigger = _a.trigger, value = _a.value;\n        var oldValue = this.state.value;\n        var oldTrigger = this.props.trigger;\n        if (value !== oldValue || !oldValue)\n            this.setState({ value: value });\n        /**\n         * check if trigger chars are changed, if so, change the regexp accordingly\n         */\n        if (Object.keys(trigger).join('') !== Object.keys(oldTrigger).join('')) {\n            this._createRegExp();\n        }\n    };\n    ReactTextareaAutocomplete.prototype.renderSuggestionListContainer = function () {\n        var _this = this;\n        var _a = this.props, disableMentions = _a.disableMentions, dropdownClassName = _a.dropdownClassName, dropdownStyle = _a.dropdownStyle, itemClassName = _a.itemClassName, itemStyle = _a.itemStyle, listClassName = _a.listClassName, SuggestionItem = _a.SuggestionItem, _b = _a.SuggestionList, SuggestionList = _b === void 0 ? DefaultSuggestionList : _b;\n        var triggerProps = this.getTriggerProps();\n        if (triggerProps.values &&\n            triggerProps.currentTrigger &&\n            !(disableMentions && triggerProps.currentTrigger === '@')) {\n            return (React.createElement(\"div\", { className: \"rta__autocomplete \" + (dropdownClassName || ''), ref: function (ref) {\n                    _this.dropdownRef = ref;\n                }, style: dropdownStyle },\n                React.createElement(SuggestionList, __assign({ className: listClassName, dropdownScroll: this._dropdownScroll, itemClassName: itemClassName, itemStyle: itemStyle, onSelect: this._onSelect, SuggestionItem: SuggestionItem }, triggerProps))));\n        }\n        return null;\n    };\n    ReactTextareaAutocomplete.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, className = _a.className, containerClassName = _a.containerClassName, containerStyle = _a.containerStyle, style = _a.style;\n        var maxRows = this.props.maxRows;\n        var _b = this.state, dataLoading = _b.dataLoading, value = _b.value;\n        if (!this.props.grow)\n            maxRows = 1;\n        return (React.createElement(\"div\", { className: \"rta \" + (dataLoading === true ? 'rta--loading' : '') + \" \" + (containerClassName || ''), style: containerStyle },\n            this.renderSuggestionListContainer(),\n            React.createElement(Textarea, __assign({}, this._cleanUpProps(), { className: \"rta__textarea \" + (className || ''), maxRows: maxRows, onBlur: this._onClickAndBlurHandler, onChange: this._changeHandler, onClick: this._onClickAndBlurHandler, onFocus: this.props.onFocus, onScroll: this._onScrollHandler, onSelect: this._selectHandler, ref: function (ref) {\n                    if (_this.props.innerRef)\n                        _this.props.innerRef(ref);\n                    _this.textareaRef = ref;\n                }, style: style, value: value }, this.props.additionalTextareaProps))));\n    };\n    ReactTextareaAutocomplete.defaultProps = {\n        closeOnClickOutside: true,\n        maxRows: 10,\n        minChar: 1,\n        movePopupAsYouType: false,\n        scrollToItem: true,\n        value: '',\n    };\n    return ReactTextareaAutocomplete;\n}(React.Component));\nexport { ReactTextareaAutocomplete };\nReactTextareaAutocomplete.propTypes = {\n    className: PropTypes.string,\n    closeOnClickOutside: PropTypes.bool,\n    containerClassName: PropTypes.string,\n    containerStyle: PropTypes.object,\n    disableMentions: PropTypes.bool,\n    dropdownClassName: PropTypes.string,\n    dropdownStyle: PropTypes.object,\n    itemClassName: PropTypes.string,\n    itemStyle: PropTypes.object,\n    keycodeSubmitKeys: PropTypes.array,\n    listClassName: PropTypes.string,\n    listStyle: PropTypes.object,\n    loaderClassName: PropTypes.string,\n    loaderStyle: PropTypes.object,\n    loadingComponent: PropTypes.elementType,\n    minChar: PropTypes.number,\n    onBlur: PropTypes.func,\n    onCaretPositionChange: PropTypes.func,\n    onChange: PropTypes.func,\n    onSelect: PropTypes.func,\n    style: PropTypes.object,\n    SuggestionList: PropTypes.elementType,\n    trigger: triggerPropsCheck,\n    value: PropTypes.string,\n};\n"],"mappings":"AAAA,IAAIA,SAAS,GAAI,IAAI,IAAI,IAAI,CAACA,SAAS,IAAM,YAAY;EACrD,IAAIC,aAAa,GAAG,SAAAA,CAAUC,CAAC,EAAEC,CAAC,EAAE;IAChCF,aAAa,GAAGG,MAAM,CAACC,cAAc,IAChC;MAAEC,SAAS,EAAE;IAAG,CAAC,YAAYC,KAAK,IAAI,UAAUL,CAAC,EAAEC,CAAC,EAAE;MAAED,CAAC,CAACI,SAAS,GAAGH,CAAC;IAAE,CAAE,IAC5E,UAAUD,CAAC,EAAEC,CAAC,EAAE;MAAE,KAAK,IAAIK,CAAC,IAAIL,CAAC,EAAE,IAAIC,MAAM,CAACK,SAAS,CAACC,cAAc,CAACC,IAAI,CAACR,CAAC,EAAEK,CAAC,CAAC,EAAEN,CAAC,CAACM,CAAC,CAAC,GAAGL,CAAC,CAACK,CAAC,CAAC;IAAE,CAAC;IACrG,OAAOP,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;EAC9B,CAAC;EACD,OAAO,UAAUD,CAAC,EAAEC,CAAC,EAAE;IACnB,IAAI,OAAOA,CAAC,KAAK,UAAU,IAAIA,CAAC,KAAK,IAAI,EACrC,MAAM,IAAIS,SAAS,CAAC,sBAAsB,GAAGC,MAAM,CAACV,CAAC,CAAC,GAAG,+BAA+B,CAAC;IAC7FF,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;IACnB,SAASW,EAAEA,CAAA,EAAG;MAAE,IAAI,CAACC,WAAW,GAAGb,CAAC;IAAE;IACtCA,CAAC,CAACO,SAAS,GAAGN,CAAC,KAAK,IAAI,GAAGC,MAAM,CAACY,MAAM,CAACb,CAAC,CAAC,IAAIW,EAAE,CAACL,SAAS,GAAGN,CAAC,CAACM,SAAS,EAAE,IAAIK,EAAE,CAAC,CAAC,CAAC;EACxF,CAAC;AACL,CAAC,CAAE,CAAC;AACJ,IAAIG,QAAQ,GAAI,IAAI,IAAI,IAAI,CAACA,QAAQ,IAAK,YAAY;EAClDA,QAAQ,GAAGb,MAAM,CAACc,MAAM,IAAI,UAASC,CAAC,EAAE;IACpC,KAAK,IAAIC,CAAC,EAAEC,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGC,SAAS,CAACC,MAAM,EAAEH,CAAC,GAAGC,CAAC,EAAED,CAAC,EAAE,EAAE;MACjDD,CAAC,GAAGG,SAAS,CAACF,CAAC,CAAC;MAChB,KAAK,IAAIb,CAAC,IAAIY,CAAC,EAAE,IAAIhB,MAAM,CAACK,SAAS,CAACC,cAAc,CAACC,IAAI,CAACS,CAAC,EAAEZ,CAAC,CAAC,EAC3DW,CAAC,CAACX,CAAC,CAAC,GAAGY,CAAC,CAACZ,CAAC,CAAC;IACnB;IACA,OAAOW,CAAC;EACZ,CAAC;EACD,OAAOF,QAAQ,CAACQ,KAAK,CAAC,IAAI,EAAEF,SAAS,CAAC;AAC1C,CAAC;AACD,OAAOG,KAAK,MAAM,OAAO;AACzB,OAAOC,SAAS,MAAM,YAAY;AAClC,OAAOC,QAAQ,MAAM,yBAAyB;AAC9C,OAAOC,mBAAmB,MAAM,gBAAgB;AAChD,OAAOC,WAAW,MAAM,cAAc;AACtC,SAASC,kBAAkB,QAAQ,UAAU;AAC7C,OAAOC,SAAS,IAAIC,SAAS,QAAQ,YAAY;AACjD,SAASC,IAAI,IAAIC,qBAAqB,QAAQ,QAAQ;AACtD,SAASC,sBAAsB,EAAEC,mBAAmB,EAAEC,YAAY,EAAEC,iBAAiB,QAAS,SAAS;AACvG,SAASC,WAAW,QAAQ,4BAA4B;AACxD,IAAIC,yBAAyB,GAAG,aAAe,UAAUC,MAAM,EAAE;EAC7D1C,SAAS,CAACyC,yBAAyB,EAAEC,MAAM,CAAC;EAC5C,SAASD,yBAAyBA,CAACE,KAAK,EAAE;IACtC,IAAIC,KAAK,GAAGF,MAAM,CAAC/B,IAAI,CAAC,IAAI,EAAEgC,KAAK,CAAC,IAAI,IAAI;IAC5CC,KAAK,CAACC,oBAAoB,GAAG,YAAY;MACrC,IAAI,CAACD,KAAK,CAACE,WAAW,EAClB,OAAO,IAAI;MACf,OAAO;QACHC,YAAY,EAAEH,KAAK,CAACE,WAAW,CAACC,YAAY;QAC5CC,cAAc,EAAEJ,KAAK,CAACE,WAAW,CAACE;MACtC,CAAC;IACL,CAAC;IACDJ,KAAK,CAACK,eAAe,GAAG,YAAY;MAChC,IAAI,CAACL,KAAK,CAACE,WAAW,EAClB,OAAO,IAAI;MACf,IAAII,EAAE,GAAGN,KAAK,CAACE,WAAW;QAAEC,YAAY,GAAGG,EAAE,CAACH,YAAY;QAAEC,cAAc,GAAGE,EAAE,CAACF,cAAc;MAC9F,IAAIA,cAAc,KAAKD,YAAY,EAC/B,OAAO,IAAI;MACf,OAAOH,KAAK,CAACO,KAAK,CAACC,KAAK,CAACC,MAAM,CAACL,cAAc,EAAED,YAAY,GAAGC,cAAc,CAAC;IAClF,CAAC;IACDJ,KAAK,CAACU,gBAAgB,GAAG,UAAUC,QAAQ,EAAE;MACzC,IAAIA,QAAQ,KAAK,KAAK,CAAC,EAAE;QAAEA,QAAQ,GAAG,CAAC;MAAE;MACzC,IAAI,CAACX,KAAK,CAACE,WAAW,EAClB;MACJF,KAAK,CAACE,WAAW,CAACU,KAAK,CAAC,CAAC;MACzBZ,KAAK,CAACE,WAAW,CAACW,iBAAiB,CAACF,QAAQ,EAAEA,QAAQ,CAAC;IAC3D,CAAC;IACDX,KAAK,CAACc,gBAAgB,GAAG,YAAY;MACjC,IAAI,CAACd,KAAK,CAACE,WAAW,EAClB,OAAO,CAAC;MACZ,OAAOF,KAAK,CAACE,WAAW,CAACC,YAAY;IACzC,CAAC;IACDH,KAAK,CAACe,yBAAyB,GAAG,UAAUC,QAAQ,EAAE;MAClDA,QAAQ,CAACC,OAAO,CAAC,UAAUC,YAAY,EAAE;QACrC,IAAIC,WAAW,GAAGD,YAAY;QAC9B,IAAIC,WAAW,CAACvC,MAAM,KAAK,CAAC,EAAE;UAC1BuC,WAAW,GAAGA,WAAW,CAAC,CAAC,CAAC;QAChC;QACA;QACA,IAAIC,MAAM,GAAGF,YAAY,CAACG,KAAK,CAAC,UAAUC,IAAI,EAAE;UAAE,OAAO,CAAC,EAAE,EAAE,EAAE,CAAC,CAACC,QAAQ,CAACD,IAAI,CAAC;QAAE,CAAC,CAAC;QACpF,IAAIF,MAAM,EACNpB,KAAK,CAACwB,mBAAmB,GAAG,IAAI;QACpC,OAAOpC,SAAS,CAACqC,GAAG,CAACN,WAAW,EAAE,UAAUO,CAAC,EAAE;UAAE,OAAO1B,KAAK,CAAC2B,QAAQ,CAACD,CAAC,CAAC;QAAE,CAAC,CAAC;MACjF,CAAC,CAAC;IACN,CAAC;IACD1B,KAAK,CAAC2B,QAAQ,GAAG,UAAUC,KAAK,EAAE;MAC9B,IAAI,CAAC5B,KAAK,CAACE,WAAW,EAClB;MACJ,IAAI2B,OAAO,GAAG7B,KAAK,CAACO,KAAK,CAACuB,cAAc;MACxC,IAAIC,QAAQ,GAAG/B,KAAK,CAACE,WAAW,CAAC8B,OAAO,CAAC,QAAQ,CAAC;MAClD;MACA,IAAI,CAACD,QAAQ,IACRH,KAAK,CAACK,QAAQ,KAAK,IAAI,IAAI,CAACjC,KAAK,CAACwB,mBAAoB,IACtDI,KAAK,CAACK,QAAQ,KAAK,IAAI,IAAI,CAACjC,KAAK,CAACD,KAAK,CAACmC,iBAAkB,EAAE;QAC7D;MACJ;MACA,IAAI,CAACL,OAAO,IAAI,CAAC7B,KAAK,CAACO,KAAK,CAAC4B,IAAI,EAAE;QAC/B;QACAnC,KAAK,CAACoC,YAAY,CAAC,CAAC;QACpB,IAAIpC,KAAK,CAACE,WAAW,EAAE;UACnBF,KAAK,CAACE,WAAW,CAACC,YAAY,GAAG,CAAC;QACtC;QACAH,KAAK,CAACD,KAAK,CAACsC,YAAY,CAACT,KAAK,CAAC;QAC/B5B,KAAK,CAACsC,kBAAkB,CAAC,CAAC;MAC9B;IACJ,CAAC;IACDtC,KAAK,CAACuC,QAAQ,GAAG,YAAY;MACzB,IAAI,CAACvC,KAAK,CAACD,KAAK,CAACyC,WAAW,IAAI,CAACxC,KAAK,CAACE,WAAW,EAC9C;MACJ;MACA,IAAI6B,QAAQ,GAAG/B,KAAK,CAACE,WAAW,CAAC8B,OAAO,CAAC,QAAQ,CAAC;MAClD,IAAI,CAACD,QAAQ,EACT;MACJ/B,KAAK,CAACoC,YAAY,CAAC,CAAC;IACxB,CAAC;IACDpC,KAAK,CAACoC,YAAY,GAAG,YAAY;MAC7B,IAAI5B,KAAK,GAAGR,KAAK,CAACO,KAAK,CAACC,KAAK;MAC7B,IAAIiC,aAAa,GAAG,gBAAgB;MACpC,IAAIC,KAAK,GAAGD,aAAa,CAACE,IAAI,CAACnC,KAAK,CAACoC,KAAK,CAAC,CAAC,EAAE5C,KAAK,CAACc,gBAAgB,CAAC,CAAC,CAAC,CAAC;MACxE,IAAI+B,QAAQ,GAAGH,KAAK,IAAIA,KAAK,CAAC,CAAC,CAAC;MAChC,IAAI,CAACG,QAAQ,EACT;MACJ,IAAIC,MAAM,GAAGJ,KAAK,CAAC,CAAC,CAAC;MACrB,IAAIK,OAAO,GAAG/C,KAAK,CAACD,KAAK,CAACyC,WAAW,CAACK,QAAQ,CAAC;MAC/C,IAAIE,OAAO,IAAI,IAAI,EACf;MACJ,IAAIC,cAAc,GAAGxC,KAAK,CAACoC,KAAK,CAAC,CAAC,EAAE5C,KAAK,CAACc,gBAAgB,CAAC,CAAC,GAAG4B,KAAK,CAAC,CAAC,CAAC,CAAC9D,MAAM,CAAC;MAC/E,IAAIqE,cAAc,GAAGzC,KAAK,CAACoC,KAAK,CAAC5C,KAAK,CAACc,gBAAgB,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;MAC9D,IAAIoC,OAAO,GAAGF,cAAc,GAAGD,OAAO,GAAGD,MAAM,GAAGG,cAAc;MAChEjD,KAAK,CAACmD,QAAQ,CAAC;QACX3C,KAAK,EAAE0C;MACX,CAAC,EAAE,YAAY;QACX;QACA,IAAIxB,CAAC,GAAG,IAAIxC,WAAW,CAAC,QAAQ,EAAE;UAAEkE,OAAO,EAAE;QAAK,CAAC,CAAC;QACpDpD,KAAK,CAACE,WAAW,CAACmD,aAAa,CAAC3B,CAAC,CAAC;QAClC,IAAI1B,KAAK,CAACD,KAAK,CAACuD,QAAQ,EACpBtD,KAAK,CAACD,KAAK,CAACuD,QAAQ,CAAC5B,CAAC,CAAC;MAC/B,CAAC,CAAC;IACN,CAAC;IACD1B,KAAK,CAACuD,SAAS,GAAG,UAAUC,QAAQ,EAAE;MAClC,IAAIlD,EAAE,GAAGN,KAAK,CAACD,KAAK;QAAE0D,iBAAiB,GAAGnD,EAAE,CAACmD,iBAAiB;QAAEH,QAAQ,GAAGhD,EAAE,CAACgD,QAAQ;QAAEI,gBAAgB,GAAGpD,EAAE,CAACoD,gBAAgB;MAC9H,IAAIC,EAAE,GAAG3D,KAAK,CAACO,KAAK;QAAEqD,YAAY,GAAGD,EAAE,CAAC7B,cAAc;QAAE3B,YAAY,GAAGwD,EAAE,CAACxD,YAAY;QAAE0D,aAAa,GAAGF,EAAE,CAACnD,KAAK;MAChH,IAAIsB,cAAc,GAAG4B,gBAAgB,GAAG,GAAG,GAAGE,YAAY;MAC1D,IAAI,CAAC9B,cAAc,EACf;MACJ,IAAIgC,oBAAoB,GAAG,SAAAA,CAAUnD,QAAQ,EAAEoD,KAAK,EAAEC,UAAU,EAAE;QAC9D,QAAQrD,QAAQ;UACZ,KAAK,OAAO;YACR,OAAOqD,UAAU;UACrB,KAAK,MAAM;UACX,KAAK,KAAK;YACN,OAAOA,UAAU,GAAGD,KAAK,CAACnF,MAAM;UACpC;YACI,IAAI,CAACqF,MAAM,CAACC,SAAS,CAACvD,QAAQ,CAAC,EAAE;cAC7B,MAAM,IAAIwD,KAAK,CAAC,gEAAgE,CAAC;YACrF;YACA,OAAOxD,QAAQ;QACvB;MACJ,CAAC;MACD,IAAIyD,YAAY,GAAGV,gBAAgB,GAAG,GAAG,GAAGG,aAAa,CAACjB,KAAK,CAAC,CAAC,EAAEzC,YAAY,CAAC;MAChF,IAAIkE,oBAAoB,GAAGD,YAAY,CAACE,WAAW,CAACxC,cAAc,CAAC;MACnE;MACA,IAAIyC,cAAc,GAAGf,QAAQ,CAACgB,aAAa,KAAK,MAAM,GAAGhB,QAAQ,CAACiB,IAAI,GAAG,GAAG,GAAGjB,QAAQ,CAACiB,IAAI;MAC5F,IAAIC,gBAAgB,GAAGZ,oBAAoB,CAACN,QAAQ,CAACgB,aAAa,EAAED,cAAc,EAAEF,oBAAoB,CAAC;MACzG,IAAIM,YAAY,GAAGP,YAAY,CAACQ,SAAS,CAAC,CAAC,EAAEP,oBAAoB,CAAC,GAAGE,cAAc;MACnF,IAAIM,cAAc,GAAGhB,aAAa,CAACiB,OAAO,CAACV,YAAY,EAAEO,YAAY,CAAC;MACtE;MACA3E,KAAK,CAACmD,QAAQ,CAAC;QACX4B,WAAW,EAAE,KAAK;QAClBvE,KAAK,EAAEqE;MACX,CAAC,EAAE,YAAY;QACX;QACA,IAAInD,CAAC,GAAG,IAAIxC,WAAW,CAAC,QAAQ,EAAE;UAAEkE,OAAO,EAAE;QAAK,CAAC,CAAC;QACpDpD,KAAK,CAACE,WAAW,CAACmD,aAAa,CAAC3B,CAAC,CAAC;QAClC,IAAI4B,QAAQ,EACRA,QAAQ,CAAC5B,CAAC,CAAC;QACf1B,KAAK,CAACU,gBAAgB,CAACgE,gBAAgB,CAAC;MAC5C,CAAC,CAAC;MACF1E,KAAK,CAACsC,kBAAkB,CAAC,CAAC;MAC1BmB,iBAAiB,CAAC,CAAC;IACvB,CAAC;IACDzD,KAAK,CAACgF,gBAAgB,GAAG,UAAUC,YAAY,EAAE;MAC7C,IAAIrB,YAAY,GAAG5D,KAAK,CAACO,KAAK,CAACuB,cAAc;MAC7C,IAAIoD,eAAe,GAAGlF,KAAK,CAACmF,0BAA0B,CAACF,YAAY,CAAC;MACpE,IAAInD,cAAc,GAAGmD,YAAY,IAAIrB,YAAY;MACjD,IAAI,CAAC9B,cAAc,IAAI,CAACoD,eAAe,EACnC,OAAO,IAAI;MACf,IAAIE,QAAQ,GAAGF,eAAe,CAACE,QAAQ;MACvC,IAAI,CAACA,QAAQ,EACT,OAAO,IAAI;MACf,OAAO,UAAUC,IAAI,EAAE;QACnB,IAAI,OAAOD,QAAQ,KAAK,UAAU,EAAE;UAChC,MAAM,IAAIjB,KAAK,CAAC,6IAA6I,CAAC;QAClK;QACA,IAAIiB,QAAQ,EAAE;UACV,OAAOA,QAAQ,CAACC,IAAI,EAAEvD,cAAc,CAAC;QACzC;QACA,OAAO,IAAI;MACf,CAAC;IACL,CAAC;IACD9B,KAAK,CAACsF,iBAAiB,GAAG,UAAUL,YAAY,EAAE;MAC9C,IAAI3E,EAAE,GAAGN,KAAK,CAACO,KAAK;QAAEgF,WAAW,GAAGjF,EAAE,CAACiF,WAAW;QAAE3B,YAAY,GAAGtD,EAAE,CAACwB,cAAc;MACpF,IAAIoD,eAAe,GAAGlF,KAAK,CAACmF,0BAA0B,CAACF,YAAY,CAAC;MACpE,IAAInD,cAAc,GAAGmD,YAAY,IAAIrB,YAAY;MACjD,IAAI,CAAC9B,cAAc,IAAI,CAACoD,eAAe,EACnC,OAAO,IAAI;MACf,IAAIM,MAAM,GAAGN,eAAe,CAACM,MAAM;MACnC,OAAO,UAAUH,IAAI,EAAE;QACnB,IAAI,OAAOA,IAAI,KAAK,QAAQ,KAAK,CAACG,MAAM,IAAI,OAAOA,MAAM,KAAK,UAAU,CAAC,EAAE;UACvE,MAAM,IAAIrB,KAAK,CAAC,8KAA8K,CAAC;QACnM;QACA,IAAIqB,MAAM,EAAE;UACR,IAAIC,aAAa,GAAGD,MAAM,CAACH,IAAI,EAAEvD,cAAc,CAAC;UAChD,IAAI,CAAC2D,aAAa,IAAI,OAAOA,aAAa,KAAK,QAAQ,EAAE;YACrD,MAAM,IAAItB,KAAK,CAAC,gHAAgH,GAAGlG,MAAM,CAACwH,aAAa,CAAC,GAAG,6CAA6C,GAAG3D,cAAc,GAAG,qBAAqB,GAAGyD,WAAW,GAAG,2GAA2G,CAAC;UAClX;UACA,IAAI,OAAOE,aAAa,KAAK,QAAQ,EAAE;YACnC,OAAO;cACHjB,aAAa,EAAEhF,sBAAsB;cACrCiF,IAAI,EAAEgB;YACV,CAAC;UACL;UACA,IAAI,CAACA,aAAa,CAAChB,IAAI,EAAE;YACrB,MAAM,IAAIN,KAAK,CAAC,iJAAiJ,GAAGrC,cAAc,GAAG,qBAAqB,GAAGyD,WAAW,GAAG,MAAM,CAAC;UACtO;UACA,IAAI,CAACE,aAAa,CAACjB,aAAa,EAAE;YAC9B,MAAM,IAAIL,KAAK,CAAC,0JAA0J,GAAGrC,cAAc,GAAG,qBAAqB,GAAGyD,WAAW,GAAG,MAAM,CAAC;UAC/O;UACA,OAAOE,aAAa;QACxB;QACA,IAAI,OAAOJ,IAAI,KAAK,QAAQ,EAAE;UAC1B,MAAM,IAAIlB,KAAK,CAAC,gCAAgC,CAAC;QACrD;QACA,OAAO;UACHK,aAAa,EAAEhF,sBAAsB;UACrCiF,IAAI,EAAE,EAAE,GAAG3C,cAAc,GAAGuD,IAAI,GAAGvD;QACvC,CAAC;MACL,CAAC;IACL,CAAC;IACD9B,KAAK,CAACmF,0BAA0B,GAAG,UAAUF,YAAY,EAAE;MACvD,IAAIrB,YAAY,GAAG5D,KAAK,CAACO,KAAK,CAACuB,cAAc;MAC7C,IAAIA,cAAc,GAAGmD,YAAY,IAAIrB,YAAY;MACjD,IAAI,CAAC9B,cAAc,EACf,OAAO,IAAI;MACf,OAAO9B,KAAK,CAACD,KAAK,CAAC8B,OAAO,CAACC,cAAc,CAAC;IAC9C,CAAC;IACD9B,KAAK,CAAC0F,sBAAsB,GAAG,YAAY;MACvC,IAAIpF,EAAE,GAAGN,KAAK,CAACO,KAAK;QAAEgF,WAAW,GAAGjF,EAAE,CAACiF,WAAW;QAAEzD,cAAc,GAAGxB,EAAE,CAACwB,cAAc;MACtF,IAAIoD,eAAe,GAAGlF,KAAK,CAACmF,0BAA0B,CAAC,CAAC;MACxD,IAAI,CAACrD,cAAc,IAAI,CAACoD,eAAe,EACnC;MACJ,IAAIS,SAAS,GAAGT,eAAe,CAACS,SAAS;QAAEC,YAAY,GAAGV,eAAe,CAACU,YAAY;MACtF,IAAI,OAAOA,YAAY,KAAK,UAAU,EAAE;QACpC,MAAM,IAAIzB,KAAK,CAAC,wCAAwC,CAAC;MAC7D;MACAnE,KAAK,CAACmD,QAAQ,CAAC;QAAE4B,WAAW,EAAE;MAAK,CAAC,CAAC;MACrC;MACAa,YAAY,CAACL,WAAW,EAAEvF,KAAK,CAACO,KAAK,CAACC,KAAK,EAAE,UAAU2B,IAAI,EAAE4B,KAAK,EAAE;QAChE;QACA,IAAIA,KAAK,KAAK/D,KAAK,CAACO,KAAK,CAACgF,WAAW,EACjC;QACJ,IAAI,CAAC5H,KAAK,CAACkI,OAAO,CAAC1D,IAAI,CAAC,EAAE;UACtB,MAAM,IAAIgC,KAAK,CAAC,2CAA2C,CAAC;QAChE;QACA,IAAI,CAAChF,kBAAkB,CAACwG,SAAS,CAAC,EAAE;UAChC,MAAM,IAAIxB,KAAK,CAAC,8BAA8B,CAAC;QACnD;QACA;QACA,IAAIrC,cAAc,KAAK9B,KAAK,CAACO,KAAK,CAACuB,cAAc,EAC7C;QACJ;QACA,IAAI,CAACK,IAAI,CAACvD,MAAM,EAAE;UACdoB,KAAK,CAACsC,kBAAkB,CAAC,CAAC;UAC1B;QACJ;QACAtC,KAAK,CAACmD,QAAQ,CAAC;UACXwC,SAAS,EAAEA,SAAS;UACpBxD,IAAI,EAAEA,IAAI;UACV4C,WAAW,EAAE;QACjB,CAAC,CAAC;MACN,CAAC,CAAC;IACN,CAAC;IACD/E,KAAK,CAAC8F,eAAe,GAAG,UAAUb,YAAY,EAAE;MAC5C,IAAI3E,EAAE,GAAGN,KAAK,CAACO,KAAK;QAAEqD,YAAY,GAAGtD,EAAE,CAACwB,cAAc;QAAEK,IAAI,GAAG7B,EAAE,CAAC6B,IAAI;MACtE,IAAIL,cAAc,GAAGmD,YAAY,IAAIrB,YAAY;MACjD,IAAI,CAAC9B,cAAc,IAAI,CAACK,IAAI,IAAKA,IAAI,IAAI,CAACA,IAAI,CAACvD,MAAO,EAClD,OAAO,IAAI;MACf,OAAOuD,IAAI;IACf,CAAC;IACDnC,KAAK,CAAC+F,aAAa,GAAG,YAAY;MAC9B,IAAIlE,OAAO,GAAG7B,KAAK,CAACD,KAAK,CAAC8B,OAAO;MACjC;MACA;MACA7B,KAAK,CAACgG,WAAW,GAAG,IAAIC,MAAM,CAAC,IAAI,GAAGzI,MAAM,CAAC0I,IAAI,CAACrE,OAAO,CAAC,CAACsE,IAAI,CAAC,EAAE,CAAC,GAAG,uBAAuB,CAAC;IAClG,CAAC;IACD;AACR;AACA;IACQnG,KAAK,CAACsC,kBAAkB,GAAG,YAAY;MACnCtC,KAAK,CAACmD,QAAQ,CAAC;QACXrB,cAAc,EAAE,IAAI;QACpBK,IAAI,EAAE,IAAI;QACV4C,WAAW,EAAE,KAAK;QAClBqB,IAAI,EAAE,IAAI;QACVC,GAAG,EAAE;MACT,CAAC,CAAC;IACN,CAAC;IACDrG,KAAK,CAACsG,aAAa,GAAG,YAAY;MAC9B,IAAIvG,KAAK,GAAG1B,QAAQ,CAAC,CAAC,CAAC,EAAE2B,KAAK,CAACD,KAAK,CAAC;MACrC,IAAIwG,OAAO,GAAG,CACV,yBAAyB,EACzB,WAAW,EACX,mBAAmB,EACnB,qBAAqB,EACrB,oBAAoB,EACpB,gBAAgB,EAChB,iBAAiB,EACjB,mBAAmB,EACnB,eAAe,EACf,MAAM,EACN,cAAc,EACd,UAAU,EACV,eAAe,EACf,WAAW,EACX,mBAAmB,EACnB,eAAe,EACf,WAAW,EACX,iBAAiB,EACjB,aAAa,EACb,kBAAkB,EAClB,SAAS,EACT,oBAAoB,EACpB,uBAAuB,EACvB,UAAU,EACV,KAAK,EACL,aAAa,EACb,cAAc,EACd,kBAAkB,EAClB,gBAAgB,EAChB,gBAAgB,EAChB,SAAS,EACT,OAAO,CACV;MACD;MACA,KAAK,IAAIC,IAAI,IAAIzG,KAAK,EAAE;QACpB,IAAIwG,OAAO,CAAChF,QAAQ,CAACiF,IAAI,CAAC,EACtB,OAAOzG,KAAK,CAACyG,IAAI,CAAC;MAC1B;MACA,OAAOzG,KAAK;IAChB,CAAC;IACDC,KAAK,CAACyG,UAAU,GAAG,UAAUhC,IAAI,EAAE;MAC/B,IAAIA,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,EACf,OAAO,KAAK;MAChB,IAAIiC,MAAM,GAAGjC,IAAI,CAACkC,KAAK,CAAC,GAAG,CAAC;MAC5B,IAAID,MAAM,CAAC9H,MAAM,GAAG,CAAC,EACjB,OAAO,KAAK;MAChB,OAAO,IAAI;IACf,CAAC;IACDoB,KAAK,CAAC4G,cAAc,GAAG,UAAUlF,CAAC,EAAE;MAChC,IAAIpB,EAAE,GAAGN,KAAK,CAACD,KAAK;QAAE8G,OAAO,GAAGvG,EAAE,CAACuG,OAAO;QAAEC,kBAAkB,GAAGxG,EAAE,CAACwG,kBAAkB;QAAEC,qBAAqB,GAAGzG,EAAE,CAACyG,qBAAqB;QAAEzD,QAAQ,GAAGhD,EAAE,CAACgD,QAAQ;QAAEzB,OAAO,GAAGvB,EAAE,CAACuB,OAAO;MACtL,IAAI8B,EAAE,GAAG3D,KAAK,CAACO,KAAK;QAAE6F,IAAI,GAAGzC,EAAE,CAACyC,IAAI;QAAEC,GAAG,GAAG1C,EAAE,CAAC0C,GAAG;MAClD,IAAIW,QAAQ,GAAGtF,CAAC,CAACuF,MAAM;MACvB,IAAI9G,YAAY,GAAG6G,QAAQ,CAAC7G,YAAY;QAAEC,cAAc,GAAG4G,QAAQ,CAAC5G,cAAc;QAAEI,KAAK,GAAGwG,QAAQ,CAACxG,KAAK;MAC1G,IAAI8C,QAAQ,EAAE;QACV5B,CAAC,CAACwF,OAAO,CAAC,CAAC;QACX5D,QAAQ,CAAC5B,CAAC,CAAC;MACf;MACA,IAAIqF,qBAAqB,EACrBA,qBAAqB,CAAC/G,KAAK,CAACc,gBAAgB,CAAC,CAAC,CAAC;MACnDd,KAAK,CAACmD,QAAQ,CAAC;QAAE3C,KAAK,EAAEA;MAAM,CAAC,CAAC;MAChC,IAAIsB,cAAc;MAClB,IAAIqF,SAAS;MACb,IAAInH,KAAK,CAACyG,UAAU,CAACjG,KAAK,CAAC,EAAE;QACzBsB,cAAc,GAAG,GAAG;QACpBqF,SAAS,GAAG3G,KAAK;MACrB,CAAC,MACI;QACD,IAAI4G,aAAa,GAAG5J,MAAM,CAAC0I,IAAI,CAACrE,OAAO,CAAC,CAACsE,IAAI,CAAC,CAAC,CAACrB,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC;QAChE,IAAIuC,oBAAoB,GAAG,OAAO,GAAGD,aAAa,GAAG,IAAI;QACzD,IAAIE,KAAK,GAAG,IAAIrB,MAAM,CAAC,aAAa,GAAGmB,aAAa,GAAG,GAAG,GAAGC,oBAAoB,GAAG,MAAM,GAAGA,oBAAoB,GAAG,GAAG,EAAE,GAAG,CAAC;QAC7H,IAAIE,UAAU,GAAG/G,KAAK,CAACoC,KAAK,CAAC,CAAC,EAAEzC,YAAY,CAAC,CAACuC,KAAK,CAAC4E,KAAK,CAAC;QAC1DH,SAAS,GAAGI,UAAU,IAAIA,UAAU,CAACA,UAAU,CAAC3I,MAAM,GAAG,CAAC,CAAC,CAAC4I,IAAI,CAAC,CAAC;QAClE1F,cAAc,GAAIqF,SAAS,IAAI3J,MAAM,CAAC0I,IAAI,CAACrE,OAAO,CAAC,CAAC4F,IAAI,CAAC,UAAUC,CAAC,EAAE;UAAE,OAAOA,CAAC,KAAKP,SAAS,CAAC,CAAC,CAAC;QAAE,CAAC,CAAC,IAAK,IAAI;MAClH;MACA;AACZ;AACA;AACA;MACY,IAAI,CAACA,SAAS,IAAIA,SAAS,CAACvI,MAAM,IAAIiI,OAAO,EAAE;QAC3C7G,KAAK,CAACsC,kBAAkB,CAAC,CAAC;QAC1B;MACJ;MACA,IAAIiD,WAAW,GAAG4B,SAAS,CAACvE,KAAK,CAAC,CAAC,CAAC;MACpC;MACA,IAAI,CAACd,cAAc,EACf;MACJ,IAAIgF,kBAAkB,IACjBT,GAAG,KAAK,IAAI,IAAID,IAAI,KAAK,IAAK;MAC/B;MACAe,SAAS,CAACvI,MAAM,KAAK,CAAC,EAAE;QACxB,IAAI+I,EAAE,GAAG1I,mBAAmB,CAAC+H,QAAQ,EAAE7G,YAAY,CAAC;UAAEyH,OAAO,GAAGD,EAAE,CAACvB,IAAI;UAAEyB,MAAM,GAAGF,EAAE,CAACtB,GAAG;QACxFrG,KAAK,CAACmD,QAAQ,CAAC;UACX;UACAiD,IAAI,EAAEwB,OAAO;UACbvB,GAAG,EAAEwB,MAAM,GAAG7H,KAAK,CAACE,WAAW,CAAC4H,SAAS,IAAI;QACjD,CAAC,CAAC;MACN;MACA9H,KAAK,CAACmD,QAAQ,CAAC;QACXoC,WAAW,EAAEA,WAAW;QACxBzD,cAAc,EAAEA,cAAc;QAC9B3B,YAAY,EAAEA,YAAY;QAC1BC,cAAc,EAAEA;MACpB,CAAC,EAAE,YAAY;QACX,IAAI;UACAJ,KAAK,CAAC0F,sBAAsB,CAAC,CAAC;QAClC,CAAC,CACD,OAAOqC,GAAG,EAAE;UACRrI,YAAY,CAACqI,GAAG,CAACC,OAAO,CAAC;QAC7B;MACJ,CAAC,CAAC;IACN,CAAC;IACDhI,KAAK,CAACiI,cAAc,GAAG,UAAUvG,CAAC,EAAE;MAChC,IAAIpB,EAAE,GAAGN,KAAK,CAACD,KAAK;QAAEgH,qBAAqB,GAAGzG,EAAE,CAACyG,qBAAqB;QAAEmB,QAAQ,GAAG5H,EAAE,CAAC4H,QAAQ;MAC9F,IAAInB,qBAAqB,EACrBA,qBAAqB,CAAC/G,KAAK,CAACc,gBAAgB,CAAC,CAAC,CAAC;MACnD,IAAIoH,QAAQ,EAAE;QACVxG,CAAC,CAACwF,OAAO,CAAC,CAAC;QACXgB,QAAQ,CAACxG,CAAC,CAAC;MACf;IACJ,CAAC;IACD;IACA1B,KAAK,CAACmI,sBAAsB,GAAG,UAAUzG,CAAC,EAAE;MACxC,IAAIpB,EAAE,GAAGN,KAAK,CAACD,KAAK;QAAEqI,mBAAmB,GAAG9H,EAAE,CAAC8H,mBAAmB;QAAEC,MAAM,GAAG/H,EAAE,CAAC+H,MAAM;MACtF;MACA;MACA;MACA,IAAIC,EAAE,GAAG5G,CAAC,CAAC6G,aAAa;MACxB,IAAIvI,KAAK,CAACwI,WAAW,IAAIF,EAAE,YAAYG,IAAI,IAAIzI,KAAK,CAACwI,WAAW,CAACE,QAAQ,CAACJ,EAAE,CAAC,EAAE;QAC3E;MACJ;MACA,IAAIF,mBAAmB,EACnBpI,KAAK,CAACsC,kBAAkB,CAAC,CAAC;MAC9B,IAAI+F,MAAM,EAAE;QACR3G,CAAC,CAACwF,OAAO,CAAC,CAAC;QACXmB,MAAM,CAAC3G,CAAC,CAAC;MACb;IACJ,CAAC;IACD1B,KAAK,CAAC2I,gBAAgB,GAAG,YAAY;MAAE,OAAO3I,KAAK,CAACsC,kBAAkB,CAAC,CAAC;IAAE,CAAC;IAC3EtC,KAAK,CAAC4I,eAAe,GAAG,UAAUvD,IAAI,EAAE;MACpC,IAAIwD,YAAY,GAAG7I,KAAK,CAACD,KAAK,CAAC8I,YAAY;MAC3C,IAAI,CAACA,YAAY,EACb;MACJ,IAAIA,YAAY,KAAK,IAAI,EAAE;QACvBpJ,mBAAmB,CAACO,KAAK,CAACwI,WAAW,EAAEnD,IAAI,CAAC;QAC5C;MACJ;MACA,IAAI,OAAOwD,YAAY,KAAK,UAAU,IAAIA,YAAY,CAACjK,MAAM,KAAK,CAAC,EAAE;QACjE,MAAM,IAAIuF,KAAK,CAAC,sHAAsH,CAAC;MAC3I;MACA0E,YAAY,CAAC7I,KAAK,CAACwI,WAAW,EAAEnD,IAAI,CAAC;IACzC,CAAC;IACDrF,KAAK,CAAC8I,eAAe,GAAG,YAAY;MAChC,IAAIxI,EAAE,GAAGN,KAAK,CAACD,KAAK;QAAE2D,gBAAgB,GAAGpD,EAAE,CAACoD,gBAAgB;QAAE7B,OAAO,GAAGvB,EAAE,CAACuB,OAAO;MAClF,IAAI8B,EAAE,GAAG3D,KAAK,CAACO,KAAK;QAAEoF,SAAS,GAAGhC,EAAE,CAACgC,SAAS;QAAE7D,cAAc,GAAG6B,EAAE,CAAC7B,cAAc;QAAE3B,YAAY,GAAGwD,EAAE,CAACxD,YAAY;QAAEK,KAAK,GAAGmD,EAAE,CAACnD,KAAK;MACpI,IAAIuI,YAAY,GAAG/I,KAAK,CAACgF,gBAAgB,CAAC,CAAC;MAC3C,IAAIgE,cAAc,GAAGhJ,KAAK,CAAC8F,eAAe,CAAC,CAAC;MAC5C,IAAIL,aAAa,GAAGzF,KAAK,CAACsF,iBAAiB,CAAC,CAAC;MAC7C,IAAI2D,YAAY,GAAG;QACftD,SAAS,EAAEA,SAAS;QACpB7D,cAAc,EAAEA,cAAc;QAC9BoH,eAAe,EAAEH,YAAY;QAC7BI,gBAAgB,EAAE1D,aAAa;QAC/BtF,YAAY,EAAEA,YAAY;QAC1BK,KAAK,EAAEA,KAAK;QACZ4I,MAAM,EAAEJ;MACZ,CAAC;MACD,IAAItF,gBAAgB,IAAI7B,OAAO,CAAC,GAAG,CAAC,EAAE;QAClC,IAAIwH,iBAAiB;QACrB,IAAIC,WAAW,GAAGzH,OAAO,CAAC,GAAG,CAAC,CAAC+D,YAAY;QAC3C0D,WAAW,KAAK,IAAI,IAAIA,WAAW,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,WAAW,CAAC,EAAE,EAAE,GAAG,EAAE,UAAUnH,IAAI,EAAE;UAC3FkH,iBAAiB,GAAGlH,IAAI;QAC5B,CAAC,CAAC;QACF8G,YAAY,CAACtD,SAAS,GAAG/F,WAAW;QACpCqJ,YAAY,CAACnH,cAAc,GAAG,GAAG;QACjCmH,YAAY,CAACE,gBAAgB,GAAGnJ,KAAK,CAACsF,iBAAiB,CAAC,GAAG,CAAC;QAC5D2D,YAAY,CAACC,eAAe,GAAGlJ,KAAK,CAACgF,gBAAgB,CAAC,GAAG,CAAC;QAC1DiE,YAAY,CAAC9I,YAAY,GAAG,CAAC;QAC7B8I,YAAY,CAACzI,KAAK,GAAG,GAAG;QACxByI,YAAY,CAACG,MAAM,GAAGC,iBAAiB;MAC3C;MACA,OAAOJ,YAAY;IACvB,CAAC;IACD,IAAI3I,EAAE,GAAGN,KAAK,CAACD,KAAK;MAAEwJ,gBAAgB,GAAGjJ,EAAE,CAACiJ,gBAAgB;MAAE1H,OAAO,GAAGvB,EAAE,CAACuB,OAAO;MAAErB,KAAK,GAAGF,EAAE,CAACE,KAAK;IACpG;IACA;IACAR,KAAK,CAAC+F,aAAa,CAAC,CAAC;IACrB,IAAI,CAACwD,gBAAgB,EAAE;MACnB,MAAM,IAAIpF,KAAK,CAAC,sCAAsC,CAAC;IAC3D;IACA,IAAI,CAACtC,OAAO,EAAE;MACV,MAAM,IAAIsC,KAAK,CAAC,6BAA6B,CAAC;IAClD;IACAnE,KAAK,CAACO,KAAK,GAAG;MACVgF,WAAW,EAAE,EAAE;MACfI,SAAS,EAAE,IAAI;MACf7D,cAAc,EAAE,IAAI;MACpBK,IAAI,EAAE,IAAI;MACV4C,WAAW,EAAE,KAAK;MAClBvD,mBAAmB,EAAE,KAAK;MAC1B4E,IAAI,EAAE,IAAI;MACVoD,aAAa,EAAE,CAAC,CAAC;MACjBrJ,YAAY,EAAE,CAAC;MACfC,cAAc,EAAE,CAAC;MACjBiG,GAAG,EAAE,IAAI;MACT7F,KAAK,EAAEA,KAAK,IAAI;IACpB,CAAC;IACD,OAAOR,KAAK;EAChB;EACAH,yBAAyB,CAAChC,SAAS,CAAC4L,iBAAiB,GAAG,YAAY;IAChE,IAAIzJ,KAAK,GAAG,IAAI;IAChBZ,SAAS,CAACqC,GAAG,CAACpC,SAAS,CAACqK,GAAG,EAAE,YAAY;MAAE,OAAO1J,KAAK,CAACsC,kBAAkB,CAAC,CAAC;IAAE,CAAC,CAAC;IAChFlD,SAAS,CAACqC,GAAG,CAACpC,SAAS,CAACsK,KAAK,EAAE,YAAY;MAAE,OAAO3J,KAAK,CAACuC,QAAQ,CAAC,CAAC;IAAE,CAAC,CAAC;IACxE,IAAIiH,aAAa,GAAG,CAAC,CAAC;IACtB,IAAII,aAAa,GAAG,IAAI,CAAC7J,KAAK,CAACmC,iBAAiB;IAChD,IAAI0H,aAAa,EAAE;MACf,IAAIC,YAAY,GAAG,IAAI,CAAC9I,yBAAyB,CAAC6I,aAAa,CAAC;MAChEJ,aAAa,CAACK,YAAY,CAAC,GAAGA,YAAY;IAC9C,CAAC,MACI;MACD,IAAIC,UAAU,GAAG1K,SAAS,CAACqC,GAAG,CAACpC,SAAS,CAAC0K,KAAK,EAAE,UAAUrI,CAAC,EAAE;QAAE,OAAO1B,KAAK,CAAC2B,QAAQ,CAACD,CAAC,CAAC;MAAE,CAAC,CAAC;MAC3F8H,aAAa,CAACM,UAAU,CAAC,GAAGA,UAAU;IAC1C;IACA,IAAI,CAAC3G,QAAQ,CAAC;MACVqG,aAAa,EAAEA;IACnB,CAAC,CAAC;IACFpK,SAAS,CAAC4K,WAAW,CAAC,CAAC;EAC3B,CAAC;EACDnK,yBAAyB,CAAChC,SAAS,CAACoM,gCAAgC,GAAG,UAAUC,SAAS,EAAE;IACxF,IAAI,CAACC,OAAO,CAACD,SAAS,CAAC;EAC3B,CAAC;EACDrK,yBAAyB,CAAChC,SAAS,CAACuM,oBAAoB,GAAG,YAAY;IACnEhL,SAAS,CAACiL,UAAU,CAAC,CAAC;IACtBjL,SAAS,CAACkL,MAAM,CAAC,IAAI,CAAC/J,KAAK,CAACiJ,aAAa,CAAC;EAC9C,CAAC;EACD;EACA3J,yBAAyB,CAAChC,SAAS,CAACsM,OAAO,GAAG,UAAU7J,EAAE,EAAE;IACxD,IAAIuB,OAAO,GAAGvB,EAAE,CAACuB,OAAO;MAAErB,KAAK,GAAGF,EAAE,CAACE,KAAK;IAC1C,IAAI+J,QAAQ,GAAG,IAAI,CAAChK,KAAK,CAACC,KAAK;IAC/B,IAAIgK,UAAU,GAAG,IAAI,CAACzK,KAAK,CAAC8B,OAAO;IACnC,IAAIrB,KAAK,KAAK+J,QAAQ,IAAI,CAACA,QAAQ,EAC/B,IAAI,CAACpH,QAAQ,CAAC;MAAE3C,KAAK,EAAEA;IAAM,CAAC,CAAC;IACnC;AACR;AACA;IACQ,IAAIhD,MAAM,CAAC0I,IAAI,CAACrE,OAAO,CAAC,CAACsE,IAAI,CAAC,EAAE,CAAC,KAAK3I,MAAM,CAAC0I,IAAI,CAACsE,UAAU,CAAC,CAACrE,IAAI,CAAC,EAAE,CAAC,EAAE;MACpE,IAAI,CAACJ,aAAa,CAAC,CAAC;IACxB;EACJ,CAAC;EACDlG,yBAAyB,CAAChC,SAAS,CAAC4M,6BAA6B,GAAG,YAAY;IAC5E,IAAIzK,KAAK,GAAG,IAAI;IAChB,IAAIM,EAAE,GAAG,IAAI,CAACP,KAAK;MAAE2K,eAAe,GAAGpK,EAAE,CAACoK,eAAe;MAAEC,iBAAiB,GAAGrK,EAAE,CAACqK,iBAAiB;MAAEC,aAAa,GAAGtK,EAAE,CAACsK,aAAa;MAAEC,aAAa,GAAGvK,EAAE,CAACuK,aAAa;MAAEC,SAAS,GAAGxK,EAAE,CAACwK,SAAS;MAAEC,aAAa,GAAGzK,EAAE,CAACyK,aAAa;MAAEC,cAAc,GAAG1K,EAAE,CAAC0K,cAAc;MAAErH,EAAE,GAAGrD,EAAE,CAAC2K,cAAc;MAAEA,cAAc,GAAGtH,EAAE,KAAK,KAAK,CAAC,GAAGpE,qBAAqB,GAAGoE,EAAE;IAC5V,IAAIsF,YAAY,GAAG,IAAI,CAACH,eAAe,CAAC,CAAC;IACzC,IAAIG,YAAY,CAACG,MAAM,IACnBH,YAAY,CAACnH,cAAc,IAC3B,EAAE4I,eAAe,IAAIzB,YAAY,CAACnH,cAAc,KAAK,GAAG,CAAC,EAAE;MAC3D,OAAQhD,KAAK,CAACoM,aAAa,CAAC,KAAK,EAAE;QAAEC,SAAS,EAAE,oBAAoB,IAAIR,iBAAiB,IAAI,EAAE,CAAC;QAAES,GAAG,EAAE,SAAAA,CAAUA,GAAG,EAAE;UAC9GpL,KAAK,CAACwI,WAAW,GAAG4C,GAAG;QAC3B,CAAC;QAAEC,KAAK,EAAET;MAAc,CAAC,EACzB9L,KAAK,CAACoM,aAAa,CAACD,cAAc,EAAE5M,QAAQ,CAAC;QAAE8M,SAAS,EAAEJ,aAAa;QAAEO,cAAc,EAAE,IAAI,CAAC1C,eAAe;QAAEiC,aAAa,EAAEA,aAAa;QAAEC,SAAS,EAAEA,SAAS;QAAE5C,QAAQ,EAAE,IAAI,CAAC3E,SAAS;QAAEyH,cAAc,EAAEA;MAAe,CAAC,EAAE/B,YAAY,CAAC,CAAC,CAAC;IACtP;IACA,OAAO,IAAI;EACf,CAAC;EACDpJ,yBAAyB,CAAChC,SAAS,CAAC0N,MAAM,GAAG,YAAY;IACrD,IAAIvL,KAAK,GAAG,IAAI;IAChB,IAAIM,EAAE,GAAG,IAAI,CAACP,KAAK;MAAEoL,SAAS,GAAG7K,EAAE,CAAC6K,SAAS;MAAEK,kBAAkB,GAAGlL,EAAE,CAACkL,kBAAkB;MAAEC,cAAc,GAAGnL,EAAE,CAACmL,cAAc;MAAEJ,KAAK,GAAG/K,EAAE,CAAC+K,KAAK;IAC/I,IAAIK,OAAO,GAAG,IAAI,CAAC3L,KAAK,CAAC2L,OAAO;IAChC,IAAI/H,EAAE,GAAG,IAAI,CAACpD,KAAK;MAAEwE,WAAW,GAAGpB,EAAE,CAACoB,WAAW;MAAEvE,KAAK,GAAGmD,EAAE,CAACnD,KAAK;IACnE,IAAI,CAAC,IAAI,CAACT,KAAK,CAAC4L,IAAI,EAChBD,OAAO,GAAG,CAAC;IACf,OAAQ5M,KAAK,CAACoM,aAAa,CAAC,KAAK,EAAE;MAAEC,SAAS,EAAE,MAAM,IAAIpG,WAAW,KAAK,IAAI,GAAG,cAAc,GAAG,EAAE,CAAC,GAAG,GAAG,IAAIyG,kBAAkB,IAAI,EAAE,CAAC;MAAEH,KAAK,EAAEI;IAAe,CAAC,EAC7J,IAAI,CAAChB,6BAA6B,CAAC,CAAC,EACpC3L,KAAK,CAACoM,aAAa,CAAClM,QAAQ,EAAEX,QAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,CAACiI,aAAa,CAAC,CAAC,EAAE;MAAE6E,SAAS,EAAE,gBAAgB,IAAIA,SAAS,IAAI,EAAE,CAAC;MAAEO,OAAO,EAAEA,OAAO;MAAErD,MAAM,EAAE,IAAI,CAACF,sBAAsB;MAAE7E,QAAQ,EAAE,IAAI,CAACsD,cAAc;MAAEgF,OAAO,EAAE,IAAI,CAACzD,sBAAsB;MAAE0D,OAAO,EAAE,IAAI,CAAC9L,KAAK,CAAC8L,OAAO;MAAEC,QAAQ,EAAE,IAAI,CAACnD,gBAAgB;MAAET,QAAQ,EAAE,IAAI,CAACD,cAAc;MAAEmD,GAAG,EAAE,SAAAA,CAAUA,GAAG,EAAE;QACzV,IAAIpL,KAAK,CAACD,KAAK,CAACgM,QAAQ,EACpB/L,KAAK,CAACD,KAAK,CAACgM,QAAQ,CAACX,GAAG,CAAC;QAC7BpL,KAAK,CAACE,WAAW,GAAGkL,GAAG;MAC3B,CAAC;MAAEC,KAAK,EAAEA,KAAK;MAAE7K,KAAK,EAAEA;IAAM,CAAC,EAAE,IAAI,CAACT,KAAK,CAACiM,uBAAuB,CAAC,CAAC,CAAC;EAClF,CAAC;EACDnM,yBAAyB,CAACoM,YAAY,GAAG;IACrC7D,mBAAmB,EAAE,IAAI;IACzBsD,OAAO,EAAE,EAAE;IACX7E,OAAO,EAAE,CAAC;IACVC,kBAAkB,EAAE,KAAK;IACzB+B,YAAY,EAAE,IAAI;IAClBrI,KAAK,EAAE;EACX,CAAC;EACD,OAAOX,yBAAyB;AACpC,CAAC,CAACf,KAAK,CAACoN,SAAS,CAAE;AACnB,SAASrM,yBAAyB;AAClCA,yBAAyB,CAACsM,SAAS,GAAG;EAClChB,SAAS,EAAEpM,SAAS,CAACqN,MAAM;EAC3BhE,mBAAmB,EAAErJ,SAAS,CAACsN,IAAI;EACnCb,kBAAkB,EAAEzM,SAAS,CAACqN,MAAM;EACpCX,cAAc,EAAE1M,SAAS,CAACuN,MAAM;EAChC5B,eAAe,EAAE3L,SAAS,CAACsN,IAAI;EAC/B1B,iBAAiB,EAAE5L,SAAS,CAACqN,MAAM;EACnCxB,aAAa,EAAE7L,SAAS,CAACuN,MAAM;EAC/BzB,aAAa,EAAE9L,SAAS,CAACqN,MAAM;EAC/BtB,SAAS,EAAE/L,SAAS,CAACuN,MAAM;EAC3BpK,iBAAiB,EAAEnD,SAAS,CAACwN,KAAK;EAClCxB,aAAa,EAAEhM,SAAS,CAACqN,MAAM;EAC/BI,SAAS,EAAEzN,SAAS,CAACuN,MAAM;EAC3BG,eAAe,EAAE1N,SAAS,CAACqN,MAAM;EACjCM,WAAW,EAAE3N,SAAS,CAACuN,MAAM;EAC7B/C,gBAAgB,EAAExK,SAAS,CAAC4N,WAAW;EACvC9F,OAAO,EAAE9H,SAAS,CAAC6N,MAAM;EACzBvE,MAAM,EAAEtJ,SAAS,CAAC8N,IAAI;EACtB9F,qBAAqB,EAAEhI,SAAS,CAAC8N,IAAI;EACrCvJ,QAAQ,EAAEvE,SAAS,CAAC8N,IAAI;EACxB3E,QAAQ,EAAEnJ,SAAS,CAAC8N,IAAI;EACxBxB,KAAK,EAAEtM,SAAS,CAACuN,MAAM;EACvBrB,cAAc,EAAElM,SAAS,CAAC4N,WAAW;EACrC9K,OAAO,EAAElC,iBAAiB;EAC1Ba,KAAK,EAAEzB,SAAS,CAACqN;AACrB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}